{"content":"{\"__ud_title\":\"ä½¿ç”¨Relayrä»£ç†åè®®URL\",\"__ud_tags\":[\"Cent\"],\"__ud_update_time\":1769768927733,\"__ud_create_time\":1769765697962,\"__ud_draft\":false,\"type\":\"doc\",\"content\":[{\"type\":\"heading\",\"attrs\":{\"level\":1,\"id\":\"ä½¿ç”¨Relayrä»£ç†åè®®URL\"},\"content\":[{\"type\":\"text\",\"text\":\"ä½¿ç”¨Relayrä»£ç†åè®®URL\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°è·¨åŸŸã€éœ€è¦åŠ¨æ€æ›´æ¢ API ä»£ç†æˆ–æ˜¯åœ¨è¯·æ±‚å¤´ä¸­æ³¨å…¥é‰´æƒä¿¡æ¯çš„éœ€æ±‚ã€‚æœ¬æ–‡å°†ä»‹ç»ä¸€ç§é€šè¿‡ \"},{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"Fetch åŠ«æŒ\"},{\"type\":\"text\",\"text\":\" ç»“åˆ \"},{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"è‡ªå®šä¹‰ä¼ªåè®®\"},{\"type\":\"text\",\"text\":\" çš„æ–¹æ¡ˆï¼Œå®ç°ä¸€å¥—ä¼˜é›…ä¸”çµæ´»çš„ä»£ç†ä¸­é—´ä»¶ã€‚\"}]},{\"type\":\"blockquote\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"åœ¨Centä¸­ï¼Œæ‰€æœ‰å…è®¸è¾“å…¥è‡ªå®šä¹‰URLçš„åœ°æ–¹éƒ½æ”¯æŒRelayråè®®è‡ªå®šä¹‰ä»£ç†ï¼Œä½†æ˜¯ä½ éœ€è¦è‡ªå·±å®ç°ä¸€ä¸ªæ”¯æŒè¯¥åè®®çš„åç«¯æœåŠ¡ï¼Œå¯ä»¥é€šè¿‡Cloudflare Workersæˆ–è€…Supabase Edge Functionéƒ¨ç½²ã€‚\"}]}]},{\"type\":\"heading\",\"attrs\":{\"level\":2,\"id\":\"1-åè®®è®¾è®¡\"},\"content\":[{\"type\":\"text\",\"text\":\"1. åè®®è®¾è®¡\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"ä¼ ç»Ÿçš„ URL ä¼ å‚å®¹æ˜“å—åˆ°ç‰¹æ®Šå­—ç¬¦ï¼ˆå¦‚ JSON ä¸­çš„å¼•å·ã€å¤§æ‹¬å·ï¼‰çš„å½±å“ï¼Œå¯¼è‡´è§£æå¤±è´¥ã€‚æˆ‘ä»¬é‡‡ç”¨ \"},{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"Base64 ç¼–ç é…ç½®\"},{\"type\":\"text\",\"text\":\" çš„æ–¹æ¡ˆï¼š\"}]},{\"type\":\"heading\",\"attrs\":{\"level\":3,\"id\":\"åè®®æ ¼å¼\"},\"content\":[{\"type\":\"text\",\"text\":\"åè®®æ ¼å¼\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"proxy://<base64_config>@<target_path_suffix>\"}]},{\"type\":\"bulletList\",\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"proxy://\"},{\"type\":\"text\",\"text\":\": åè®®å¤´ï¼Œç”¨äºä¸­é—´ä»¶è¯†åˆ«ã€‚\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"<base64_config>\"},{\"type\":\"text\",\"text\":\": åŒ…å«ä»£ç†æœåŠ¡å™¨åœ°å€ã€ç›®æ ‡åŸºå‡†åœ°å€ã€é¢å¤– Header çš„ JSON å¯¹è±¡ï¼Œå¹¶ç»è¿‡ Base64 ç¼–ç ã€‚\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"@\"},{\"type\":\"text\",\"text\":\": åˆ†éš”ç¬¦ã€‚\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"<target_path_suffix>\"},{\"type\":\"text\",\"text\":\": å…·ä½“çš„ API è·¯å¾„åç¼€ã€‚\"}]}]}]},{\"type\":\"heading\",\"attrs\":{\"level\":3,\"id\":\"æ•°æ®ç»“æ„ç¤ºä¾‹\"},\"content\":[{\"type\":\"text\",\"text\":\"æ•°æ®ç»“æ„ç¤ºä¾‹\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"ç¼–ç å‰çš„ JSON é…ç½®ï¼š\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"JSON\"}]},{\"type\":\"codeBlock\",\"attrs\":{\"language\":\"json\"},\"content\":[{\"type\":\"text\",\"text\":\"{\\n  \\\"proxyUrl\\\": \\\"https://my-server.com/proxy\\\",\\n  \\\"targetBase\\\": \\\"https://api.openai.com\\\",\\n  \\\"headers\\\": {\\n    \\\"x-proxy-key\\\": \\\"Bearer sk-123\\\"\\n  }\\n}\\n\"}]},{\"type\":\"horizontalRule\"},{\"type\":\"heading\",\"attrs\":{\"level\":2,\"id\":\"2-å‰ç«¯ä¸­é—´ä»¶å®ç°\"},\"content\":[{\"type\":\"text\",\"text\":\"2. å‰ç«¯ä¸­é—´ä»¶å®ç°\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"åŸºäºä½ å·²æœ‰çš„ \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"registerProxy\"},{\"type\":\"text\",\"text\":\" åŠ«æŒæ¡†æ¶ï¼Œæˆ‘ä»¬ç¼–å†™å¦‚ä¸‹è§£æé€»è¾‘ï¼š\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"TypeScript\"}]},{\"type\":\"codeBlock\",\"attrs\":{\"language\":\"javascript\"},\"content\":[{\"type\":\"text\",\"text\":\"const proxyMiddleware: Handler = async (url, options, next) => {\\n    const urlStr = url.toString();\\n\\n    // 1. è¯†åˆ«åè®®\\n    if (!urlStr.startsWith('proxy://')) {\\n        return next(url, options);\\n    }\\n\\n    try {\\n        // 2. æ‹†åˆ† Base64 é…ç½®ä¸è·¯å¾„åç¼€\\n        const mainPart = urlStr.slice(8); // ç§»é™¤ 'proxy://'\\n        const [configBase64, ...pathParts] = mainPart.split('@');\\n        const targetPathSuffix = pathParts.join('@'); // é˜²æ­¢è·¯å¾„ä¸­ä¹Ÿå¸¦æœ‰ @\\n\\n        // 3. è§£ç å¹¶è§£æé…ç½®\\n        const configJson = JSON.parse(atob(configBase64));\\n        const { proxyUrl, targetBase, headers: extraHeaders } = configJson;\\n\\n        // æ‹¼æ¥æœ€ç»ˆç›®æ ‡åœ°å€\\n        const finalTargetUrl = `${targetBase}${targetPathSuffix}`;\\n\\n        // 4. è½¬æ¢è¯·æ±‚å‚æ•°\\n        const newOptions: RequestInit = {\\n            ...options,\\n            method: 'POST', // ä»£ç†è¯·æ±‚ç»Ÿä¸€è½¬ä¸º POST ä»¥ä¾¿åœ¨ Body ä¸­æºå¸¦ target\\n            headers: {\\n                ...options.headers,\\n                ...extraHeaders,\\n                'Content-Type': 'application/json'\\n            },\\n            body: JSON.stringify({\\n                target: finalTargetUrl,\\n                payload: options.body ? \\n                         (typeof options.body === 'string' ? JSON.parse(options.body) : options.body) \\n                         : null\\n            })\\n        };\\n\\n        console.log(`[Proxy] Forwarding to: ${finalTargetUrl}`);\\n        return next(proxyUrl, newOptions);\\n    } catch (err) {\\n        console.error(\\\"[Proxy Error]\\\", err);\\n        return next(url, options);\\n    }\\n};\\n\"}]},{\"type\":\"horizontalRule\"},{\"type\":\"heading\",\"attrs\":{\"level\":2,\"id\":\"3-ä»£ç†åç«¯å®ç°-Nodejs-ç¤ºä¾‹\"},\"content\":[{\"type\":\"text\",\"text\":\"3. ä»£ç†åç«¯å®ç° (Node.js ç¤ºä¾‹)\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"åç«¯ä»£ç†æœåŠ¡å™¨éœ€è¦æ¥æ”¶ \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"POST\"},{\"type\":\"text\",\"text\":\" è¯·æ±‚ï¼Œè§£æå…¶ä¸­çš„ \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"target\"},{\"type\":\"text\",\"text\":\" å­—æ®µï¼Œå¹¶æºå¸¦è¯·æ±‚å¤´è½¬å‘ã€‚\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"JavaScript\"}]},{\"type\":\"codeBlock\",\"attrs\":{\"language\":\"javascript\"},\"content\":[{\"type\":\"text\",\"text\":\"const express = require('express');\\nconst axios = require('axios');\\nconst app = express();\\n\\napp.use(express.json());\\n\\napp.post('/proxy', async (req, res) => {\\n    const { target, payload } = req.body;\\n    \\n    // è·å–å‰ç«¯æ³¨å…¥çš„é¢å¤– Header (ä¾‹å¦‚ x-proxy-key)\\n    const proxyHeaders = { ...req.headers };\\n    // ç§»é™¤å®¿ä¸»ä¿¡æ¯ï¼Œé˜²æ­¢ç›®æ ‡æœåŠ¡å™¨æ ¡éªŒå¤±è´¥\\n    delete proxyHeaders.host; \\n\\n    try {\\n        console.log(`Forwarding request to: ${target}`);\\n        \\n        const response = await axios({\\n            method: 'POST', // æˆ–æ ¹æ®é€»è¾‘é€ä¼ åŸ method\\n            url: target,\\n            data: payload,\\n            headers: proxyHeaders,\\n            timeout: 10000\\n        });\\n\\n        res.status(response.status).send(response.data);\\n    } catch (error) {\\n        const status = error.response ? error.response.status : 500;\\n        res.status(status).send(error.message);\\n    }\\n});\\n\\napp.listen(3000, () => console.log('Proxy Server running on port 3000'));\\n\"}]},{\"type\":\"horizontalRule\"},{\"type\":\"heading\",\"attrs\":{\"level\":2,\"id\":\"4-å¦‚ä½•ä½¿ç”¨\"},\"content\":[{\"type\":\"text\",\"text\":\"4. å¦‚ä½•ä½¿ç”¨\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"åœ¨ä¸šåŠ¡ä»£ç ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡å·¥å…·å‡½æ•°ç”Ÿæˆè¿™ä¸ªå¤åˆ URLï¼š\"}]},{\"type\":\"heading\",\"attrs\":{\"level\":3,\"id\":\"ç”Ÿæˆå™¨å·¥å…·\"},\"content\":[{\"type\":\"text\",\"text\":\"ç”Ÿæˆå™¨å·¥å…·\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"JavaScript\"}]},{\"type\":\"codeBlock\",\"attrs\":{\"language\":\"javascript\"},\"content\":[{\"type\":\"text\",\"text\":\"function createProxyUrl(config, apiPath) {\\n    const base64 = btoa(JSON.stringify(config));\\n    return `proxy://${base64}@${apiPath}`;\\n}\\n\"}]},{\"type\":\"heading\",\"attrs\":{\"level\":3,\"id\":\"å‘èµ·è¯·æ±‚\"},\"content\":[{\"type\":\"text\",\"text\":\"å‘èµ·è¯·æ±‚\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"JavaScript\"}]},{\"type\":\"codeBlock\",\"attrs\":{\"language\":\"javascript\"},\"content\":[{\"type\":\"text\",\"text\":\"const config = {\\n    proxyUrl: \\\"http://localhost:3000/proxy\\\",\\n    targetBase: \\\"https://api.openai.com\\\",\\n    headers: { \\\"Authorization\\\": \\\"Bearer TOKEN\\\" }\\n};\\n\\n// å®é™…è¯·æ±‚åœ°å€ï¼šproxy://ey...@{config}@/v1/chat/completions\\nfetch(createProxyUrl(config, '/v1/chat/completions'), {\\n    method: 'POST',\\n    body: JSON.stringify({ model: 'gpt-3.5-turbo' })\\n});\\n\"}]},{\"type\":\"horizontalRule\"},{\"type\":\"heading\",\"attrs\":{\"level\":2,\"id\":\"5-æ€»ç»“\"},\"content\":[{\"type\":\"text\",\"text\":\"5. æ€»ç»“\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"è¯¥æ–¹æ¡ˆçš„ä¼˜åŠ¿åœ¨äºï¼š\"}]},{\"type\":\"orderedList\",\"attrs\":{\"start\":1,\"type\":null},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"é«˜åº¦å°è£…\"},{\"type\":\"text\",\"text\":\"ï¼šä¸šåŠ¡ä»£ç æ— éœ€å…³å¿ƒä»£ç†æœåŠ¡å™¨çš„å…·ä½“å®ç°ã€‚\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"å…¼å®¹æ€§å¼º\"},{\"type\":\"text\",\"text\":\"ï¼šBase64 é¿å…äº† URL ç‰¹æ®Šå­—ç¬¦å¸¦æ¥çš„è§£æå™©æ¢¦ã€‚\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"åŠ¨æ€æ€§\"},{\"type\":\"text\",\"text\":\"ï¼šå¯ä»¥éšæ—¶åœ¨å‰ç«¯é€šè¿‡ä¿®æ”¹ \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"config\"},{\"type\":\"text\",\"text\":\" æ¥åˆ‡æ¢ä¸åŒçš„ä»£ç†èŠ‚ç‚¹æˆ–ç›®æ ‡ APIã€‚\"}]}]}]},{\"type\":\"blockquote\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"æ³¨æ„\"},{\"type\":\"text\",\"text\":\"ï¼šç”±äº Base64 ç¼–ç ä¼šå¢åŠ å­—ç¬¦ä¸²ä½“ç§¯ï¼Œä¸” URL é•¿åº¦åœ¨ä¸åŒæµè§ˆå™¨ä¸­æœ‰é™åˆ¶ï¼ˆå¦‚ Chrome é™åˆ¶ä¸º 2MBï¼‰ï¼Œæœ¬æ–¹æ¡ˆé€‚ç”¨äºé…ç½®ä¿¡æ¯ä¸­ç­‰çš„åœºæ™¯ã€‚\"}]}]},{\"type\":\"horizontalRule\"},{\"type\":\"heading\",\"attrs\":{\"level\":2,\"id\":null},\"content\":[{\"type\":\"text\",\"text\":\"Demo\"}]},{\"type\":\"codeBlock\",\"attrs\":{\"language\":\"html\"},\"content\":[{\"type\":\"text\",\"text\":\"<!-- reactive -->\\n    <style>\\n        body { font-family: -apple-system, BlinkMacSystemFont, \\\"Segoe UI\\\", Helvetica, Arial, sans-serif; max-width: 600px; margin: 40px auto; padding: 20px; line-height: 1.6; color: #333; }\\n        .card { border: 1px solid #e1e4e8; padding: 24px; border-radius: 12px; box-shadow: 0 8px 24px rgba(149,157,165,0.1); background: white; }\\n        h2 { margin-top: 0; color: #0366d6; font-size: 1.5rem; }\\n        label { display: block; margin-top: 15px; font-weight: 600; font-size: 0.9rem; color: #586069; }\\n        input, textarea { width: 100%; padding: 10px; margin-top: 6px; box-sizing: border-box; border: 1px solid #d1d5da; border-radius: 6px; font-size: 14px; background: #fafbfc; transition: border 0.2s; }\\n        input:focus, textarea:focus { border-color: #0366d6; outline: none; background: white; box-shadow: 0 0 0 3px rgba(3,102,214,0.1); }\\n        button { background: #2ea44f; color: white; border: 1px solid rgba(27,31,35,0.15); padding: 12px; border-radius: 6px; cursor: pointer; margin-top: 24px; width: 100%; font-weight: 600; font-size: 16px; transition: background 0.2s; }\\n        button:hover { background: #2c974b; }\\n        \\n        #result-container { margin-top: 24px; display: none; animation: fadeIn 0.3s ease; }\\n        .result-box { \\n            background: #f6f8fa; \\n            padding: 15px; \\n            word-break: break-all; \\n            border: 1px dashed #0366d6; \\n            border-radius: 6px; \\n            font-family: \\\"SFMono-Regular\\\", Consolas, \\\"Liberation Mono\\\", Menlo, monospace; \\n            font-size: 13px;\\n            cursor: pointer;\\n            position: relative;\\n            transition: background 0.2s;\\n        }\\n        .result-box:hover { background: #f0f3f6; }\\n        .result-box::after { content: \\\"ç‚¹å‡»å¤åˆ¶\\\"; position: absolute; right: 8px; top: 4px; font-size: 10px; color: #0366d6; font-weight: bold; opacity: 0.7; }\\n        \\n        .copy-tip { color: #28a745; font-size: 12px; font-weight: bold; margin-top: 8px; display: none; text-align: center; }\\n        \\n        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }\\n    </style>\\n\\n<div class=\\\"card\\\">\\n    <h2>ğŸ”— Proxy åè®®ç”Ÿæˆå™¨</h2>\\n    \\n    <label>ä»£ç†æœåŠ¡å™¨åœ°å€ (Proxy URL)</label>\\n    <input type=\\\"text\\\" id=\\\"proxyUrl\\\" placeholder=\\\"https://my-server.com/proxy\\\" value=\\\"https://my-server.com/proxy\\\">\\n\\n    <label>ç›®æ ‡ API æ ¹è·¯å¾„ (Target Base)</label>\\n    <input type=\\\"text\\\" id=\\\"targetBase\\\" placeholder=\\\"https://openai.com/api\\\" value=\\\"https://openai.com/api\\\">\\n\\n    <label>è‡ªå®šä¹‰ Header (JSON)</label>\\n    <textarea id=\\\"headers\\\" rows=\\\"3\\\">{\\\"x-proxy-key\\\": \\\"Bearer sk-123456\\\"}</textarea>\\n\\n    <button onclick=\\\"generateLink()\\\">ç”Ÿæˆå¹¶å¤åˆ¶é“¾æ¥</button>\\n\\n    <div id=\\\"result-container\\\">\\n        <label>ç”Ÿæˆçš„ä¼ªåè®®å‰ç¼€ (ç‚¹å‡»ä¸‹æ–¹æ–¹æ¡†è‡ªåŠ¨å¤åˆ¶):</label>\\n        <div class=\\\"result-box\\\" id=\\\"output\\\" onclick=\\\"copyToClipboard()\\\"></div>\\n        <div id=\\\"copyTip\\\" class=\\\"copy-tip\\\">âœ… å·²æˆåŠŸå¤åˆ¶åˆ°å‰ªè´´æ¿ï¼</div>\\n        <p style=\\\"font-size: 12px; color: #6a737d; margin-top: 12px;\\\">\\n            ğŸ’¡ æç¤ºï¼šåœ¨ä»£ç ä¸­è°ƒç”¨æ—¶ï¼Œç›´æ¥æ‹¼æ¥å…·ä½“è·¯å¾„ï¼Œä¾‹å¦‚ï¼š<br>\\n            <code>fetch(prefix + '/v1/chat/completions')</code>\\n        </p>\\n    </div>\\n</div>\\n\\n<script>\\n    function generateLink() {\\n        const proxyUrl = document.getElementById('proxyUrl').value;\\n        const targetBase = document.getElementById('targetBase').value;\\n        const headersStr = document.getElementById('headers').value;\\n\\n        try {\\n            // æ ¡éªŒ JSON æ ¼å¼\\n            const headers = JSON.parse(headersStr);\\n            const config = { proxyUrl, targetBase, headers };\\n\\n            // å®‰å…¨çš„ UTF-8 Base64 ç¼–ç é€»è¾‘\\n            const jsonStr = JSON.stringify(config);\\n            const base64 = btoa(encodeURIComponent(jsonStr).replace(/%([0-9A-F]{2})/g, (match, p1) => {\\n                return String.fromCharCode('0x' + p1);\\n            }));\\n\\n            const finalUrl = `proxy://${base64}@`;\\n            \\n            // æ˜¾ç¤ºç»“æœ\\n            const output = document.getElementById('output');\\n            output.innerText = finalUrl;\\n            document.getElementById('result-container').style.display = 'block';\\n            \\n            // è‡ªåŠ¨è§¦å‘ä¸€æ¬¡å¤åˆ¶\\n            copyToClipboard(false); \\n        } catch (e) {\\n            alert(\\\"âŒ é”™è¯¯ï¼šJSON æ ¼å¼ä¸æ­£ç¡®ï¼Œè¯·æ£€æŸ¥ Header å­—æ®µï¼\\\");\\n        }\\n    }\\n\\n    async function copyToClipboard(showVisualFeedback = true) {\\n        const text = document.getElementById('output').innerText;\\n        if (!text) return;\\n\\n        try {\\n            await navigator.clipboard.writeText(text);\\n            \\n            if (showVisualFeedback) {\\n                const tip = document.getElementById('copyTip');\\n                tip.style.display = 'block';\\n                setTimeout(() => {\\n                    tip.style.display = 'none';\\n                }, 2000);\\n            }\\n        } catch (err) {\\n            // é™çº§å¤„ç†\\n            const textArea = document.createElement(\\\"textarea\\\");\\n            textArea.value = text;\\n            document.body.appendChild(textArea);\\n            textArea.select();\\n            document.execCommand('copy');\\n            document.body.removeChild(textArea);\\n        }\\n    }\\n</script>\"}]}]}","title":"ä½¿ç”¨Relayrä»£ç†åè®®URL","tags":["Cent"],"updateTime":1769768927733,"createTime":1769765697962,"draft":false,"intro":"åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°è·¨åŸŸã€éœ€è¦åŠ¨æ€æ›´æ¢ API ä»£ç†æˆ–æ˜¯åœ¨è¯·æ±‚å¤´ä¸­æ³¨å…¥é‰´æƒä¿¡æ¯çš„éœ€æ±‚ã€‚æœ¬æ–‡å°†ä»‹ç»ä¸€ç§é€šè¿‡ Fetch åŠ«æŒ ç»“åˆ è‡ªå®šä¹‰ä¼ªåè®® çš„æ–¹æ¡ˆï¼Œå®ç°ä¸€å¥—ä¼˜é›…ä¸”çµæ´»çš„ä»£ç†ä¸­é—´ä»¶ã€‚","html":"<h1 level=\"1\" id=\"ä½¿ç”¨Relayrä»£ç†åè®®URL\">ä½¿ç”¨Relayrä»£ç†åè®®URL</h1><p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°è·¨åŸŸã€éœ€è¦åŠ¨æ€æ›´æ¢ API ä»£ç†æˆ–æ˜¯åœ¨è¯·æ±‚å¤´ä¸­æ³¨å…¥é‰´æƒä¿¡æ¯çš„éœ€æ±‚ã€‚æœ¬æ–‡å°†ä»‹ç»ä¸€ç§é€šè¿‡ <strong>Fetch åŠ«æŒ</strong> ç»“åˆ <strong>è‡ªå®šä¹‰ä¼ªåè®®</strong> çš„æ–¹æ¡ˆï¼Œå®ç°ä¸€å¥—ä¼˜é›…ä¸”çµæ´»çš„ä»£ç†ä¸­é—´ä»¶ã€‚</p><blockquote><p>åœ¨Centä¸­ï¼Œæ‰€æœ‰å…è®¸è¾“å…¥è‡ªå®šä¹‰URLçš„åœ°æ–¹éƒ½æ”¯æŒRelayråè®®è‡ªå®šä¹‰ä»£ç†ï¼Œä½†æ˜¯ä½ éœ€è¦è‡ªå·±å®ç°ä¸€ä¸ªæ”¯æŒè¯¥åè®®çš„åç«¯æœåŠ¡ï¼Œå¯ä»¥é€šè¿‡Cloudflare Workersæˆ–è€…Supabase Edge Functionéƒ¨ç½²ã€‚</p></blockquote><h2 level=\"2\" id=\"1-åè®®è®¾è®¡\">1. åè®®è®¾è®¡</h2><p>ä¼ ç»Ÿçš„ URL ä¼ å‚å®¹æ˜“å—åˆ°ç‰¹æ®Šå­—ç¬¦ï¼ˆå¦‚ JSON ä¸­çš„å¼•å·ã€å¤§æ‹¬å·ï¼‰çš„å½±å“ï¼Œå¯¼è‡´è§£æå¤±è´¥ã€‚æˆ‘ä»¬é‡‡ç”¨ <strong>Base64 ç¼–ç é…ç½®</strong> çš„æ–¹æ¡ˆï¼š</p><h3 level=\"3\" id=\"åè®®æ ¼å¼\">åè®®æ ¼å¼</h3><p><code>proxy://&lt;base64_config&gt;@&lt;target_path_suffix&gt;</code></p><ul><li><p><code>proxy://</code>: åè®®å¤´ï¼Œç”¨äºä¸­é—´ä»¶è¯†åˆ«ã€‚</p></li><li><p><code>&lt;base64_config&gt;</code>: åŒ…å«ä»£ç†æœåŠ¡å™¨åœ°å€ã€ç›®æ ‡åŸºå‡†åœ°å€ã€é¢å¤– Header çš„ JSON å¯¹è±¡ï¼Œå¹¶ç»è¿‡ Base64 ç¼–ç ã€‚</p></li><li><p><code>@</code>: åˆ†éš”ç¬¦ã€‚</p></li><li><p><code>&lt;target_path_suffix&gt;</code>: å…·ä½“çš„ API è·¯å¾„åç¼€ã€‚</p></li></ul><h3 level=\"3\" id=\"æ•°æ®ç»“æ„ç¤ºä¾‹\">æ•°æ®ç»“æ„ç¤ºä¾‹</h3><p>ç¼–ç å‰çš„ JSON é…ç½®ï¼š</p><p>JSON</p><div class=\"llt-code readonly\"><div class=\"language\">json</div><div class=\"wrapper\"><pre><code class=\"language-json\"><span class=\"hljs-punctuation\" class=\"hljs-punctuation\">{</span>\n  <span class=\"hljs-attr\" class=\"hljs-attr\">&quot;proxyUrl&quot;</span><span class=\"hljs-punctuation\" class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\" class=\"hljs-string\">&quot;https://my-server.com/proxy&quot;</span><span class=\"hljs-punctuation\" class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\" class=\"hljs-attr\">&quot;targetBase&quot;</span><span class=\"hljs-punctuation\" class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\" class=\"hljs-string\">&quot;https://api.openai.com&quot;</span><span class=\"hljs-punctuation\" class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\" class=\"hljs-attr\">&quot;headers&quot;</span><span class=\"hljs-punctuation\" class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\" class=\"hljs-punctuation\">{</span>\n    <span class=\"hljs-attr\" class=\"hljs-attr\">&quot;x-proxy-key&quot;</span><span class=\"hljs-punctuation\" class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\" class=\"hljs-string\">&quot;Bearer sk-123&quot;</span>\n  <span class=\"hljs-punctuation\" class=\"hljs-punctuation\">}</span>\n<span class=\"hljs-punctuation\" class=\"hljs-punctuation\">}</span>\n</code></pre></div></div><hr><h2 level=\"2\" id=\"2-å‰ç«¯ä¸­é—´ä»¶å®ç°\">2. å‰ç«¯ä¸­é—´ä»¶å®ç°</h2><p>åŸºäºä½ å·²æœ‰çš„ <code>registerProxy</code> åŠ«æŒæ¡†æ¶ï¼Œæˆ‘ä»¬ç¼–å†™å¦‚ä¸‹è§£æé€»è¾‘ï¼š</p><p>TypeScript</p><div class=\"llt-code readonly\"><div class=\"language\">javascript</div><div class=\"wrapper\"><pre><code class=\"language-javascript\"><span class=\"hljs-keyword\" class=\"hljs-keyword\">const</span> <span class=\"hljs-attr\" class=\"hljs-attr\">proxyMiddleware</span>: <span class=\"hljs-title,class_\" class=\"hljs-title,class_\">Handler</span> = <span class=\"hljs-title,function_\" class=\"hljs-title,function_\">async</span> (url, options, next) =&gt; {\n    <span class=\"hljs-keyword\" class=\"hljs-keyword\">const</span> urlStr = url.<span class=\"hljs-title,function_\" class=\"hljs-title,function_\">toString</span>();\n\n    <span class=\"hljs-comment\" class=\"hljs-comment\">// 1. è¯†åˆ«åè®®</span>\n    <span class=\"hljs-keyword\" class=\"hljs-keyword\">if</span> (!urlStr.<span class=\"hljs-title,function_\" class=\"hljs-title,function_\">startsWith</span>(<span class=\"hljs-string\" class=\"hljs-string\">&apos;proxy://&apos;</span>)) {\n        <span class=\"hljs-keyword\" class=\"hljs-keyword\">return</span> <span class=\"hljs-title,function_\" class=\"hljs-title,function_\">next</span>(url, options);\n    }\n\n    <span class=\"hljs-keyword\" class=\"hljs-keyword\">try</span> {\n        <span class=\"hljs-comment\" class=\"hljs-comment\">// 2. æ‹†åˆ† Base64 é…ç½®ä¸è·¯å¾„åç¼€</span>\n        <span class=\"hljs-keyword\" class=\"hljs-keyword\">const</span> mainPart = urlStr.<span class=\"hljs-title,function_\" class=\"hljs-title,function_\">slice</span>(<span class=\"hljs-number\" class=\"hljs-number\">8</span>); <span class=\"hljs-comment\" class=\"hljs-comment\">// ç§»é™¤ &apos;proxy://&apos;</span>\n        <span class=\"hljs-keyword\" class=\"hljs-keyword\">const</span> [configBase64, ...pathParts] = mainPart.<span class=\"hljs-title,function_\" class=\"hljs-title,function_\">split</span>(<span class=\"hljs-string\" class=\"hljs-string\">&apos;@&apos;</span>);\n        <span class=\"hljs-keyword\" class=\"hljs-keyword\">const</span> targetPathSuffix = pathParts.<span class=\"hljs-title,function_\" class=\"hljs-title,function_\">join</span>(<span class=\"hljs-string\" class=\"hljs-string\">&apos;@&apos;</span>); <span class=\"hljs-comment\" class=\"hljs-comment\">// é˜²æ­¢è·¯å¾„ä¸­ä¹Ÿå¸¦æœ‰ @</span>\n\n        <span class=\"hljs-comment\" class=\"hljs-comment\">// 3. è§£ç å¹¶è§£æé…ç½®</span>\n        <span class=\"hljs-keyword\" class=\"hljs-keyword\">const</span> configJson = <span class=\"hljs-title,class_\" class=\"hljs-title,class_\">JSON</span>.<span class=\"hljs-title,function_\" class=\"hljs-title,function_\">parse</span>(<span class=\"hljs-title,function_\" class=\"hljs-title,function_\">atob</span>(configBase64));\n        <span class=\"hljs-keyword\" class=\"hljs-keyword\">const</span> { proxyUrl, targetBase, <span class=\"hljs-attr\" class=\"hljs-attr\">headers</span>: extraHeaders } = configJson;\n\n        <span class=\"hljs-comment\" class=\"hljs-comment\">// æ‹¼æ¥æœ€ç»ˆç›®æ ‡åœ°å€</span>\n        <span class=\"hljs-keyword\" class=\"hljs-keyword\">const</span> finalTargetUrl = <span class=\"hljs-string\" class=\"hljs-string\">`<span class=\"hljs-subst\" class=\"hljs-subst\">${targetBase}</span><span class=\"hljs-subst\" class=\"hljs-subst\">${targetPathSuffix}</span>`</span>;\n\n        <span class=\"hljs-comment\" class=\"hljs-comment\">// 4. è½¬æ¢è¯·æ±‚å‚æ•°</span>\n        <span class=\"hljs-keyword\" class=\"hljs-keyword\">const</span> <span class=\"hljs-attr\" class=\"hljs-attr\">newOptions</span>: <span class=\"hljs-title,class_\" class=\"hljs-title,class_\">RequestInit</span> = {\n            ...options,\n            <span class=\"hljs-attr\" class=\"hljs-attr\">method</span>: <span class=\"hljs-string\" class=\"hljs-string\">&apos;POST&apos;</span>, <span class=\"hljs-comment\" class=\"hljs-comment\">// ä»£ç†è¯·æ±‚ç»Ÿä¸€è½¬ä¸º POST ä»¥ä¾¿åœ¨ Body ä¸­æºå¸¦ target</span>\n            <span class=\"hljs-attr\" class=\"hljs-attr\">headers</span>: {\n                ...options.<span class=\"hljs-property\" class=\"hljs-property\">headers</span>,\n                ...extraHeaders,\n                <span class=\"hljs-string\" class=\"hljs-string\">&apos;Content-Type&apos;</span>: <span class=\"hljs-string\" class=\"hljs-string\">&apos;application/json&apos;</span>\n            },\n            <span class=\"hljs-attr\" class=\"hljs-attr\">body</span>: <span class=\"hljs-title,class_\" class=\"hljs-title,class_\">JSON</span>.<span class=\"hljs-title,function_\" class=\"hljs-title,function_\">stringify</span>({\n                <span class=\"hljs-attr\" class=\"hljs-attr\">target</span>: finalTargetUrl,\n                <span class=\"hljs-attr\" class=\"hljs-attr\">payload</span>: options.<span class=\"hljs-property\" class=\"hljs-property\">body</span> ? \n                         (<span class=\"hljs-keyword\" class=\"hljs-keyword\">typeof</span> options.<span class=\"hljs-property\" class=\"hljs-property\">body</span> === <span class=\"hljs-string\" class=\"hljs-string\">&apos;string&apos;</span> ? <span class=\"hljs-title,class_\" class=\"hljs-title,class_\">JSON</span>.<span class=\"hljs-title,function_\" class=\"hljs-title,function_\">parse</span>(options.<span class=\"hljs-property\" class=\"hljs-property\">body</span>) : options.<span class=\"hljs-property\" class=\"hljs-property\">body</span>) \n                         : <span class=\"hljs-literal\" class=\"hljs-literal\">null</span>\n            })\n        };\n\n        <span class=\"hljs-variable,language_\" class=\"hljs-variable,language_\">console</span>.<span class=\"hljs-title,function_\" class=\"hljs-title,function_\">log</span>(<span class=\"hljs-string\" class=\"hljs-string\">`[Proxy] Forwarding to: <span class=\"hljs-subst\" class=\"hljs-subst\">${finalTargetUrl}</span>`</span>);\n        <span class=\"hljs-keyword\" class=\"hljs-keyword\">return</span> <span class=\"hljs-title,function_\" class=\"hljs-title,function_\">next</span>(proxyUrl, newOptions);\n    } <span class=\"hljs-keyword\" class=\"hljs-keyword\">catch</span> (err) {\n        <span class=\"hljs-variable,language_\" class=\"hljs-variable,language_\">console</span>.<span class=\"hljs-title,function_\" class=\"hljs-title,function_\">error</span>(<span class=\"hljs-string\" class=\"hljs-string\">&quot;[Proxy Error]&quot;</span>, err);\n        <span class=\"hljs-keyword\" class=\"hljs-keyword\">return</span> <span class=\"hljs-title,function_\" class=\"hljs-title,function_\">next</span>(url, options);\n    }\n};\n</code></pre></div></div><hr><h2 level=\"2\" id=\"3-ä»£ç†åç«¯å®ç°-Nodejs-ç¤ºä¾‹\">3. ä»£ç†åç«¯å®ç° (Node.js ç¤ºä¾‹)</h2><p>åç«¯ä»£ç†æœåŠ¡å™¨éœ€è¦æ¥æ”¶ <code>POST</code> è¯·æ±‚ï¼Œè§£æå…¶ä¸­çš„ <code>target</code> å­—æ®µï¼Œå¹¶æºå¸¦è¯·æ±‚å¤´è½¬å‘ã€‚</p><p>JavaScript</p><div class=\"llt-code readonly\"><div class=\"language\">javascript</div><div class=\"wrapper\"><pre><code class=\"language-javascript\"><span class=\"hljs-keyword\" class=\"hljs-keyword\">const</span> express = <span class=\"hljs-built_in\" class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\" class=\"hljs-string\">&apos;express&apos;</span>);\n<span class=\"hljs-keyword\" class=\"hljs-keyword\">const</span> axios = <span class=\"hljs-built_in\" class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\" class=\"hljs-string\">&apos;axios&apos;</span>);\n<span class=\"hljs-keyword\" class=\"hljs-keyword\">const</span> app = <span class=\"hljs-title,function_\" class=\"hljs-title,function_\">express</span>();\n\napp.<span class=\"hljs-title,function_\" class=\"hljs-title,function_\">use</span>(express.<span class=\"hljs-title,function_\" class=\"hljs-title,function_\">json</span>());\n\napp.<span class=\"hljs-title,function_\" class=\"hljs-title,function_\">post</span>(<span class=\"hljs-string\" class=\"hljs-string\">&apos;/proxy&apos;</span>, <span class=\"hljs-title,function_\" class=\"hljs-title,function_\">async</span> (req, res) =&gt; {\n    <span class=\"hljs-keyword\" class=\"hljs-keyword\">const</span> { target, payload } = req.<span class=\"hljs-property\" class=\"hljs-property\">body</span>;\n    \n    <span class=\"hljs-comment\" class=\"hljs-comment\">// è·å–å‰ç«¯æ³¨å…¥çš„é¢å¤– Header (ä¾‹å¦‚ x-proxy-key)</span>\n    <span class=\"hljs-keyword\" class=\"hljs-keyword\">const</span> proxyHeaders = { ...req.<span class=\"hljs-property\" class=\"hljs-property\">headers</span> };\n    <span class=\"hljs-comment\" class=\"hljs-comment\">// ç§»é™¤å®¿ä¸»ä¿¡æ¯ï¼Œé˜²æ­¢ç›®æ ‡æœåŠ¡å™¨æ ¡éªŒå¤±è´¥</span>\n    <span class=\"hljs-keyword\" class=\"hljs-keyword\">delete</span> proxyHeaders.<span class=\"hljs-property\" class=\"hljs-property\">host</span>; \n\n    <span class=\"hljs-keyword\" class=\"hljs-keyword\">try</span> {\n        <span class=\"hljs-variable,language_\" class=\"hljs-variable,language_\">console</span>.<span class=\"hljs-title,function_\" class=\"hljs-title,function_\">log</span>(<span class=\"hljs-string\" class=\"hljs-string\">`Forwarding request to: <span class=\"hljs-subst\" class=\"hljs-subst\">${target}</span>`</span>);\n        \n        <span class=\"hljs-keyword\" class=\"hljs-keyword\">const</span> response = <span class=\"hljs-keyword\" class=\"hljs-keyword\">await</span> <span class=\"hljs-title,function_\" class=\"hljs-title,function_\">axios</span>({\n            <span class=\"hljs-attr\" class=\"hljs-attr\">method</span>: <span class=\"hljs-string\" class=\"hljs-string\">&apos;POST&apos;</span>, <span class=\"hljs-comment\" class=\"hljs-comment\">// æˆ–æ ¹æ®é€»è¾‘é€ä¼ åŸ method</span>\n            <span class=\"hljs-attr\" class=\"hljs-attr\">url</span>: target,\n            <span class=\"hljs-attr\" class=\"hljs-attr\">data</span>: payload,\n            <span class=\"hljs-attr\" class=\"hljs-attr\">headers</span>: proxyHeaders,\n            <span class=\"hljs-attr\" class=\"hljs-attr\">timeout</span>: <span class=\"hljs-number\" class=\"hljs-number\">10000</span>\n        });\n\n        res.<span class=\"hljs-title,function_\" class=\"hljs-title,function_\">status</span>(response.<span class=\"hljs-property\" class=\"hljs-property\">status</span>).<span class=\"hljs-title,function_\" class=\"hljs-title,function_\">send</span>(response.<span class=\"hljs-property\" class=\"hljs-property\">data</span>);\n    } <span class=\"hljs-keyword\" class=\"hljs-keyword\">catch</span> (error) {\n        <span class=\"hljs-keyword\" class=\"hljs-keyword\">const</span> status = error.<span class=\"hljs-property\" class=\"hljs-property\">response</span> ? error.<span class=\"hljs-property\" class=\"hljs-property\">response</span>.<span class=\"hljs-property\" class=\"hljs-property\">status</span> : <span class=\"hljs-number\" class=\"hljs-number\">500</span>;\n        res.<span class=\"hljs-title,function_\" class=\"hljs-title,function_\">status</span>(status).<span class=\"hljs-title,function_\" class=\"hljs-title,function_\">send</span>(error.<span class=\"hljs-property\" class=\"hljs-property\">message</span>);\n    }\n});\n\napp.<span class=\"hljs-title,function_\" class=\"hljs-title,function_\">listen</span>(<span class=\"hljs-number\" class=\"hljs-number\">3000</span>, <span class=\"hljs-function\" class=\"hljs-function\">() =&gt;</span> <span class=\"hljs-variable,language_\" class=\"hljs-variable,language_\">console</span>.<span class=\"hljs-title,function_\" class=\"hljs-title,function_\">log</span>(<span class=\"hljs-string\" class=\"hljs-string\">&apos;Proxy Server running on port 3000&apos;</span>));\n</code></pre></div></div><hr><h2 level=\"2\" id=\"4-å¦‚ä½•ä½¿ç”¨\">4. å¦‚ä½•ä½¿ç”¨</h2><p>åœ¨ä¸šåŠ¡ä»£ç ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡å·¥å…·å‡½æ•°ç”Ÿæˆè¿™ä¸ªå¤åˆ URLï¼š</p><h3 level=\"3\" id=\"ç”Ÿæˆå™¨å·¥å…·\">ç”Ÿæˆå™¨å·¥å…·</h3><p>JavaScript</p><div class=\"llt-code readonly\"><div class=\"language\">javascript</div><div class=\"wrapper\"><pre><code class=\"language-javascript\"><span class=\"hljs-keyword\" class=\"hljs-keyword\">function</span> <span class=\"hljs-title,function_\" class=\"hljs-title,function_\">createProxyUrl</span>(<span class=\"hljs-params\" class=\"hljs-params\">config, apiPath</span>) {\n    <span class=\"hljs-keyword\" class=\"hljs-keyword\">const</span> base64 = <span class=\"hljs-title,function_\" class=\"hljs-title,function_\">btoa</span>(<span class=\"hljs-title,class_\" class=\"hljs-title,class_\">JSON</span>.<span class=\"hljs-title,function_\" class=\"hljs-title,function_\">stringify</span>(config));\n    <span class=\"hljs-keyword\" class=\"hljs-keyword\">return</span> <span class=\"hljs-string\" class=\"hljs-string\">`proxy://<span class=\"hljs-subst\" class=\"hljs-subst\">${base64}</span>@<span class=\"hljs-subst\" class=\"hljs-subst\">${apiPath}</span>`</span>;\n}\n</code></pre></div></div><h3 level=\"3\" id=\"å‘èµ·è¯·æ±‚\">å‘èµ·è¯·æ±‚</h3><p>JavaScript</p><div class=\"llt-code readonly\"><div class=\"language\">javascript</div><div class=\"wrapper\"><pre><code class=\"language-javascript\"><span class=\"hljs-keyword\" class=\"hljs-keyword\">const</span> config = {\n    <span class=\"hljs-attr\" class=\"hljs-attr\">proxyUrl</span>: <span class=\"hljs-string\" class=\"hljs-string\">&quot;http://localhost:3000/proxy&quot;</span>,\n    <span class=\"hljs-attr\" class=\"hljs-attr\">targetBase</span>: <span class=\"hljs-string\" class=\"hljs-string\">&quot;https://api.openai.com&quot;</span>,\n    <span class=\"hljs-attr\" class=\"hljs-attr\">headers</span>: { <span class=\"hljs-string\" class=\"hljs-string\">&quot;Authorization&quot;</span>: <span class=\"hljs-string\" class=\"hljs-string\">&quot;Bearer TOKEN&quot;</span> }\n};\n\n<span class=\"hljs-comment\" class=\"hljs-comment\">// å®é™…è¯·æ±‚åœ°å€ï¼šproxy://ey...@{config}@/v1/chat/completions</span>\n<span class=\"hljs-title,function_\" class=\"hljs-title,function_\">fetch</span>(<span class=\"hljs-title,function_\" class=\"hljs-title,function_\">createProxyUrl</span>(config, <span class=\"hljs-string\" class=\"hljs-string\">&apos;/v1/chat/completions&apos;</span>), {\n    <span class=\"hljs-attr\" class=\"hljs-attr\">method</span>: <span class=\"hljs-string\" class=\"hljs-string\">&apos;POST&apos;</span>,\n    <span class=\"hljs-attr\" class=\"hljs-attr\">body</span>: <span class=\"hljs-title,class_\" class=\"hljs-title,class_\">JSON</span>.<span class=\"hljs-title,function_\" class=\"hljs-title,function_\">stringify</span>({ <span class=\"hljs-attr\" class=\"hljs-attr\">model</span>: <span class=\"hljs-string\" class=\"hljs-string\">&apos;gpt-3.5-turbo&apos;</span> })\n});\n</code></pre></div></div><hr><h2 level=\"2\" id=\"5-æ€»ç»“\">5. æ€»ç»“</h2><p>è¯¥æ–¹æ¡ˆçš„ä¼˜åŠ¿åœ¨äºï¼š</p><ol><li><p><strong>é«˜åº¦å°è£…</strong>ï¼šä¸šåŠ¡ä»£ç æ— éœ€å…³å¿ƒä»£ç†æœåŠ¡å™¨çš„å…·ä½“å®ç°ã€‚</p></li><li><p><strong>å…¼å®¹æ€§å¼º</strong>ï¼šBase64 é¿å…äº† URL ç‰¹æ®Šå­—ç¬¦å¸¦æ¥çš„è§£æå™©æ¢¦ã€‚</p></li><li><p><strong>åŠ¨æ€æ€§</strong>ï¼šå¯ä»¥éšæ—¶åœ¨å‰ç«¯é€šè¿‡ä¿®æ”¹ <code>config</code> æ¥åˆ‡æ¢ä¸åŒçš„ä»£ç†èŠ‚ç‚¹æˆ–ç›®æ ‡ APIã€‚</p></li></ol><blockquote><p><strong>æ³¨æ„</strong>ï¼šç”±äº Base64 ç¼–ç ä¼šå¢åŠ å­—ç¬¦ä¸²ä½“ç§¯ï¼Œä¸” URL é•¿åº¦åœ¨ä¸åŒæµè§ˆå™¨ä¸­æœ‰é™åˆ¶ï¼ˆå¦‚ Chrome é™åˆ¶ä¸º 2MBï¼‰ï¼Œæœ¬æ–¹æ¡ˆé€‚ç”¨äºé…ç½®ä¿¡æ¯ä¸­ç­‰çš„åœºæ™¯ã€‚</p></blockquote><hr><h2 level=\"2\" id=\"Demo\">Demo</h2><div class=\"llt-code readonly\"><div class=\"language\">html</div><div class=\"wrapper\"><pre><code class=\"language-html\"><span class=\"hljs-comment\" class=\"hljs-comment\">&lt;!-- reactive --&gt;</span><span class=\"xml\" class=\"xml\">\n    <span class=\"hljs-tag\" class=\"hljs-tag\">&lt;<span class=\"hljs-name\" class=\"hljs-name\">style</span>&gt;</span></span><span class=\"css\" class=\"css\">\n        <span class=\"hljs-selector-tag\" class=\"hljs-selector-tag\">body</span> { <span class=\"hljs-attribute\" class=\"hljs-attribute\">font-family</span>: -apple-system, BlinkMacSystemFont, <span class=\"hljs-string\" class=\"hljs-string\">&quot;Segoe UI&quot;</span>, Helvetica, Arial, sans-serif; <span class=\"hljs-attribute\" class=\"hljs-attribute\">max-width</span>: <span class=\"hljs-number\" class=\"hljs-number\">600px</span>; <span class=\"hljs-attribute\" class=\"hljs-attribute\">margin</span>: <span class=\"hljs-number\" class=\"hljs-number\">40px</span> auto; <span class=\"hljs-attribute\" class=\"hljs-attribute\">padding</span>: <span class=\"hljs-number\" class=\"hljs-number\">20px</span>; <span class=\"hljs-attribute\" class=\"hljs-attribute\">line-height</span>: <span class=\"hljs-number\" class=\"hljs-number\">1.6</span>; <span class=\"hljs-attribute\" class=\"hljs-attribute\">color</span>: <span class=\"hljs-number\" class=\"hljs-number\">#333</span>; }\n        <span class=\"hljs-selector-class\" class=\"hljs-selector-class\">.card</span> { <span class=\"hljs-attribute\" class=\"hljs-attribute\">border</span>: <span class=\"hljs-number\" class=\"hljs-number\">1px</span> solid <span class=\"hljs-number\" class=\"hljs-number\">#e1e4e8</span>; <span class=\"hljs-attribute\" class=\"hljs-attribute\">padding</span>: <span class=\"hljs-number\" class=\"hljs-number\">24px</span>; <span class=\"hljs-attribute\" class=\"hljs-attribute\">border-radius</span>: <span class=\"hljs-number\" class=\"hljs-number\">12px</span>; <span class=\"hljs-attribute\" class=\"hljs-attribute\">box-shadow</span>: <span class=\"hljs-number\" class=\"hljs-number\">0</span> <span class=\"hljs-number\" class=\"hljs-number\">8px</span> <span class=\"hljs-number\" class=\"hljs-number\">24px</span> <span class=\"hljs-built_in\" class=\"hljs-built_in\">rgba</span>(<span class=\"hljs-number\" class=\"hljs-number\">149</span>,<span class=\"hljs-number\" class=\"hljs-number\">157</span>,<span class=\"hljs-number\" class=\"hljs-number\">165</span>,<span class=\"hljs-number\" class=\"hljs-number\">0.1</span>); <span class=\"hljs-attribute\" class=\"hljs-attribute\">background</span>: white; }\n        <span class=\"hljs-selector-tag\" class=\"hljs-selector-tag\">h2</span> { <span class=\"hljs-attribute\" class=\"hljs-attribute\">margin-top</span>: <span class=\"hljs-number\" class=\"hljs-number\">0</span>; <span class=\"hljs-attribute\" class=\"hljs-attribute\">color</span>: <span class=\"hljs-number\" class=\"hljs-number\">#0366d6</span>; <span class=\"hljs-attribute\" class=\"hljs-attribute\">font-size</span>: <span class=\"hljs-number\" class=\"hljs-number\">1.5rem</span>; }\n        <span class=\"hljs-selector-tag\" class=\"hljs-selector-tag\">label</span> { <span class=\"hljs-attribute\" class=\"hljs-attribute\">display</span>: block; <span class=\"hljs-attribute\" class=\"hljs-attribute\">margin-top</span>: <span class=\"hljs-number\" class=\"hljs-number\">15px</span>; <span class=\"hljs-attribute\" class=\"hljs-attribute\">font-weight</span>: <span class=\"hljs-number\" class=\"hljs-number\">600</span>; <span class=\"hljs-attribute\" class=\"hljs-attribute\">font-size</span>: <span class=\"hljs-number\" class=\"hljs-number\">0.9rem</span>; <span class=\"hljs-attribute\" class=\"hljs-attribute\">color</span>: <span class=\"hljs-number\" class=\"hljs-number\">#586069</span>; }\n        <span class=\"hljs-selector-tag\" class=\"hljs-selector-tag\">input</span>, <span class=\"hljs-selector-tag\" class=\"hljs-selector-tag\">textarea</span> { <span class=\"hljs-attribute\" class=\"hljs-attribute\">width</span>: <span class=\"hljs-number\" class=\"hljs-number\">100%</span>; <span class=\"hljs-attribute\" class=\"hljs-attribute\">padding</span>: <span class=\"hljs-number\" class=\"hljs-number\">10px</span>; <span class=\"hljs-attribute\" class=\"hljs-attribute\">margin-top</span>: <span class=\"hljs-number\" class=\"hljs-number\">6px</span>; <span class=\"hljs-attribute\" class=\"hljs-attribute\">box-sizing</span>: border-box; <span class=\"hljs-attribute\" class=\"hljs-attribute\">border</span>: <span class=\"hljs-number\" class=\"hljs-number\">1px</span> solid <span class=\"hljs-number\" class=\"hljs-number\">#d1d5da</span>; <span class=\"hljs-attribute\" class=\"hljs-attribute\">border-radius</span>: <span class=\"hljs-number\" class=\"hljs-number\">6px</span>; <span class=\"hljs-attribute\" class=\"hljs-attribute\">font-size</span>: <span class=\"hljs-number\" class=\"hljs-number\">14px</span>; <span class=\"hljs-attribute\" class=\"hljs-attribute\">background</span>: <span class=\"hljs-number\" class=\"hljs-number\">#fafbfc</span>; <span class=\"hljs-attribute\" class=\"hljs-attribute\">transition</span>: border <span class=\"hljs-number\" class=\"hljs-number\">0.2s</span>; }\n        <span class=\"hljs-selector-tag\" class=\"hljs-selector-tag\">input</span><span class=\"hljs-selector-pseudo\" class=\"hljs-selector-pseudo\">:focus</span>, <span class=\"hljs-selector-tag\" class=\"hljs-selector-tag\">textarea</span><span class=\"hljs-selector-pseudo\" class=\"hljs-selector-pseudo\">:focus</span> { <span class=\"hljs-attribute\" class=\"hljs-attribute\">border-color</span>: <span class=\"hljs-number\" class=\"hljs-number\">#0366d6</span>; <span class=\"hljs-attribute\" class=\"hljs-attribute\">outline</span>: none; <span class=\"hljs-attribute\" class=\"hljs-attribute\">background</span>: white; <span class=\"hljs-attribute\" class=\"hljs-attribute\">box-shadow</span>: <span class=\"hljs-number\" class=\"hljs-number\">0</span> <span class=\"hljs-number\" class=\"hljs-number\">0</span> <span class=\"hljs-number\" class=\"hljs-number\">0</span> <span class=\"hljs-number\" class=\"hljs-number\">3px</span> <span class=\"hljs-built_in\" class=\"hljs-built_in\">rgba</span>(<span class=\"hljs-number\" class=\"hljs-number\">3</span>,<span class=\"hljs-number\" class=\"hljs-number\">102</span>,<span class=\"hljs-number\" class=\"hljs-number\">214</span>,<span class=\"hljs-number\" class=\"hljs-number\">0.1</span>); }\n        <span class=\"hljs-selector-tag\" class=\"hljs-selector-tag\">button</span> { <span class=\"hljs-attribute\" class=\"hljs-attribute\">background</span>: <span class=\"hljs-number\" class=\"hljs-number\">#2ea44f</span>; <span class=\"hljs-attribute\" class=\"hljs-attribute\">color</span>: white; <span class=\"hljs-attribute\" class=\"hljs-attribute\">border</span>: <span class=\"hljs-number\" class=\"hljs-number\">1px</span> solid <span class=\"hljs-built_in\" class=\"hljs-built_in\">rgba</span>(<span class=\"hljs-number\" class=\"hljs-number\">27</span>,<span class=\"hljs-number\" class=\"hljs-number\">31</span>,<span class=\"hljs-number\" class=\"hljs-number\">35</span>,<span class=\"hljs-number\" class=\"hljs-number\">0.15</span>); <span class=\"hljs-attribute\" class=\"hljs-attribute\">padding</span>: <span class=\"hljs-number\" class=\"hljs-number\">12px</span>; <span class=\"hljs-attribute\" class=\"hljs-attribute\">border-radius</span>: <span class=\"hljs-number\" class=\"hljs-number\">6px</span>; <span class=\"hljs-attribute\" class=\"hljs-attribute\">cursor</span>: pointer; <span class=\"hljs-attribute\" class=\"hljs-attribute\">margin-top</span>: <span class=\"hljs-number\" class=\"hljs-number\">24px</span>; <span class=\"hljs-attribute\" class=\"hljs-attribute\">width</span>: <span class=\"hljs-number\" class=\"hljs-number\">100%</span>; <span class=\"hljs-attribute\" class=\"hljs-attribute\">font-weight</span>: <span class=\"hljs-number\" class=\"hljs-number\">600</span>; <span class=\"hljs-attribute\" class=\"hljs-attribute\">font-size</span>: <span class=\"hljs-number\" class=\"hljs-number\">16px</span>; <span class=\"hljs-attribute\" class=\"hljs-attribute\">transition</span>: background <span class=\"hljs-number\" class=\"hljs-number\">0.2s</span>; }\n        <span class=\"hljs-selector-tag\" class=\"hljs-selector-tag\">button</span><span class=\"hljs-selector-pseudo\" class=\"hljs-selector-pseudo\">:hover</span> { <span class=\"hljs-attribute\" class=\"hljs-attribute\">background</span>: <span class=\"hljs-number\" class=\"hljs-number\">#2c974b</span>; }\n        \n        <span class=\"hljs-selector-id\" class=\"hljs-selector-id\">#result-container</span> { <span class=\"hljs-attribute\" class=\"hljs-attribute\">margin-top</span>: <span class=\"hljs-number\" class=\"hljs-number\">24px</span>; <span class=\"hljs-attribute\" class=\"hljs-attribute\">display</span>: none; <span class=\"hljs-attribute\" class=\"hljs-attribute\">animation</span>: fadeIn <span class=\"hljs-number\" class=\"hljs-number\">0.3s</span> ease; }\n        <span class=\"hljs-selector-class\" class=\"hljs-selector-class\">.result-box</span> { \n            <span class=\"hljs-attribute\" class=\"hljs-attribute\">background</span>: <span class=\"hljs-number\" class=\"hljs-number\">#f6f8fa</span>; \n            <span class=\"hljs-attribute\" class=\"hljs-attribute\">padding</span>: <span class=\"hljs-number\" class=\"hljs-number\">15px</span>; \n            <span class=\"hljs-attribute\" class=\"hljs-attribute\">word-break</span>: break-all; \n            <span class=\"hljs-attribute\" class=\"hljs-attribute\">border</span>: <span class=\"hljs-number\" class=\"hljs-number\">1px</span> dashed <span class=\"hljs-number\" class=\"hljs-number\">#0366d6</span>; \n            <span class=\"hljs-attribute\" class=\"hljs-attribute\">border-radius</span>: <span class=\"hljs-number\" class=\"hljs-number\">6px</span>; \n            <span class=\"hljs-attribute\" class=\"hljs-attribute\">font-family</span>: <span class=\"hljs-string\" class=\"hljs-string\">&quot;SFMono-Regular&quot;</span>, Consolas, <span class=\"hljs-string\" class=\"hljs-string\">&quot;Liberation Mono&quot;</span>, Menlo, monospace; \n            <span class=\"hljs-attribute\" class=\"hljs-attribute\">font-size</span>: <span class=\"hljs-number\" class=\"hljs-number\">13px</span>;\n            <span class=\"hljs-attribute\" class=\"hljs-attribute\">cursor</span>: pointer;\n            <span class=\"hljs-attribute\" class=\"hljs-attribute\">position</span>: relative;\n            <span class=\"hljs-attribute\" class=\"hljs-attribute\">transition</span>: background <span class=\"hljs-number\" class=\"hljs-number\">0.2s</span>;\n        }\n        <span class=\"hljs-selector-class\" class=\"hljs-selector-class\">.result-box</span><span class=\"hljs-selector-pseudo\" class=\"hljs-selector-pseudo\">:hover</span> { <span class=\"hljs-attribute\" class=\"hljs-attribute\">background</span>: <span class=\"hljs-number\" class=\"hljs-number\">#f0f3f6</span>; }\n        <span class=\"hljs-selector-class\" class=\"hljs-selector-class\">.result-box</span><span class=\"hljs-selector-pseudo\" class=\"hljs-selector-pseudo\">::after</span> { <span class=\"hljs-attribute\" class=\"hljs-attribute\">content</span>: <span class=\"hljs-string\" class=\"hljs-string\">&quot;ç‚¹å‡»å¤åˆ¶&quot;</span>; <span class=\"hljs-attribute\" class=\"hljs-attribute\">position</span>: absolute; <span class=\"hljs-attribute\" class=\"hljs-attribute\">right</span>: <span class=\"hljs-number\" class=\"hljs-number\">8px</span>; <span class=\"hljs-attribute\" class=\"hljs-attribute\">top</span>: <span class=\"hljs-number\" class=\"hljs-number\">4px</span>; <span class=\"hljs-attribute\" class=\"hljs-attribute\">font-size</span>: <span class=\"hljs-number\" class=\"hljs-number\">10px</span>; <span class=\"hljs-attribute\" class=\"hljs-attribute\">color</span>: <span class=\"hljs-number\" class=\"hljs-number\">#0366d6</span>; <span class=\"hljs-attribute\" class=\"hljs-attribute\">font-weight</span>: bold; <span class=\"hljs-attribute\" class=\"hljs-attribute\">opacity</span>: <span class=\"hljs-number\" class=\"hljs-number\">0.7</span>; }\n        \n        <span class=\"hljs-selector-class\" class=\"hljs-selector-class\">.copy-tip</span> { <span class=\"hljs-attribute\" class=\"hljs-attribute\">color</span>: <span class=\"hljs-number\" class=\"hljs-number\">#28a745</span>; <span class=\"hljs-attribute\" class=\"hljs-attribute\">font-size</span>: <span class=\"hljs-number\" class=\"hljs-number\">12px</span>; <span class=\"hljs-attribute\" class=\"hljs-attribute\">font-weight</span>: bold; <span class=\"hljs-attribute\" class=\"hljs-attribute\">margin-top</span>: <span class=\"hljs-number\" class=\"hljs-number\">8px</span>; <span class=\"hljs-attribute\" class=\"hljs-attribute\">display</span>: none; <span class=\"hljs-attribute\" class=\"hljs-attribute\">text-align</span>: center; }\n        \n        <span class=\"hljs-keyword\" class=\"hljs-keyword\">@keyframes</span> fadeIn { <span class=\"hljs-selector-tag\" class=\"hljs-selector-tag\">from</span> { <span class=\"hljs-attribute\" class=\"hljs-attribute\">opacity</span>: <span class=\"hljs-number\" class=\"hljs-number\">0</span>; <span class=\"hljs-attribute\" class=\"hljs-attribute\">transform</span>: <span class=\"hljs-built_in\" class=\"hljs-built_in\">translateY</span>(<span class=\"hljs-number\" class=\"hljs-number\">10px</span>); } <span class=\"hljs-selector-tag\" class=\"hljs-selector-tag\">to</span> { <span class=\"hljs-attribute\" class=\"hljs-attribute\">opacity</span>: <span class=\"hljs-number\" class=\"hljs-number\">1</span>; <span class=\"hljs-attribute\" class=\"hljs-attribute\">transform</span>: <span class=\"hljs-built_in\" class=\"hljs-built_in\">translateY</span>(<span class=\"hljs-number\" class=\"hljs-number\">0</span>); } }\n</span><span class=\"xml\" class=\"xml\">    <span class=\"hljs-tag\" class=\"hljs-tag\">&lt;/<span class=\"hljs-name\" class=\"hljs-name\">style</span>&gt;</span>\n\n<span class=\"hljs-tag\" class=\"hljs-tag\">&lt;<span class=\"hljs-name\" class=\"hljs-name\">div</span> <span class=\"hljs-attr\" class=\"hljs-attr\">class</span>=<span class=\"hljs-string\" class=\"hljs-string\">&quot;card&quot;</span>&gt;</span>\n    <span class=\"hljs-tag\" class=\"hljs-tag\">&lt;<span class=\"hljs-name\" class=\"hljs-name\">h2</span>&gt;</span>ğŸ”— Proxy åè®®ç”Ÿæˆå™¨<span class=\"hljs-tag\" class=\"hljs-tag\">&lt;/<span class=\"hljs-name\" class=\"hljs-name\">h2</span>&gt;</span>\n    \n    <span class=\"hljs-tag\" class=\"hljs-tag\">&lt;<span class=\"hljs-name\" class=\"hljs-name\">label</span>&gt;</span>ä»£ç†æœåŠ¡å™¨åœ°å€ (Proxy URL)<span class=\"hljs-tag\" class=\"hljs-tag\">&lt;/<span class=\"hljs-name\" class=\"hljs-name\">label</span>&gt;</span>\n    <span class=\"hljs-tag\" class=\"hljs-tag\">&lt;<span class=\"hljs-name\" class=\"hljs-name\">input</span> <span class=\"hljs-attr\" class=\"hljs-attr\">type</span>=<span class=\"hljs-string\" class=\"hljs-string\">&quot;text&quot;</span> <span class=\"hljs-attr\" class=\"hljs-attr\">id</span>=<span class=\"hljs-string\" class=\"hljs-string\">&quot;proxyUrl&quot;</span> <span class=\"hljs-attr\" class=\"hljs-attr\">placeholder</span>=<span class=\"hljs-string\" class=\"hljs-string\">&quot;https://my-server.com/proxy&quot;</span> <span class=\"hljs-attr\" class=\"hljs-attr\">value</span>=<span class=\"hljs-string\" class=\"hljs-string\">&quot;https://my-server.com/proxy&quot;</span>&gt;</span>\n\n    <span class=\"hljs-tag\" class=\"hljs-tag\">&lt;<span class=\"hljs-name\" class=\"hljs-name\">label</span>&gt;</span>ç›®æ ‡ API æ ¹è·¯å¾„ (Target Base)<span class=\"hljs-tag\" class=\"hljs-tag\">&lt;/<span class=\"hljs-name\" class=\"hljs-name\">label</span>&gt;</span>\n    <span class=\"hljs-tag\" class=\"hljs-tag\">&lt;<span class=\"hljs-name\" class=\"hljs-name\">input</span> <span class=\"hljs-attr\" class=\"hljs-attr\">type</span>=<span class=\"hljs-string\" class=\"hljs-string\">&quot;text&quot;</span> <span class=\"hljs-attr\" class=\"hljs-attr\">id</span>=<span class=\"hljs-string\" class=\"hljs-string\">&quot;targetBase&quot;</span> <span class=\"hljs-attr\" class=\"hljs-attr\">placeholder</span>=<span class=\"hljs-string\" class=\"hljs-string\">&quot;https://openai.com/api&quot;</span> <span class=\"hljs-attr\" class=\"hljs-attr\">value</span>=<span class=\"hljs-string\" class=\"hljs-string\">&quot;https://openai.com/api&quot;</span>&gt;</span>\n\n    <span class=\"hljs-tag\" class=\"hljs-tag\">&lt;<span class=\"hljs-name\" class=\"hljs-name\">label</span>&gt;</span>è‡ªå®šä¹‰ Header (JSON)<span class=\"hljs-tag\" class=\"hljs-tag\">&lt;/<span class=\"hljs-name\" class=\"hljs-name\">label</span>&gt;</span>\n    <span class=\"hljs-tag\" class=\"hljs-tag\">&lt;<span class=\"hljs-name\" class=\"hljs-name\">textarea</span> <span class=\"hljs-attr\" class=\"hljs-attr\">id</span>=<span class=\"hljs-string\" class=\"hljs-string\">&quot;headers&quot;</span> <span class=\"hljs-attr\" class=\"hljs-attr\">rows</span>=<span class=\"hljs-string\" class=\"hljs-string\">&quot;3&quot;</span>&gt;</span>{&quot;x-proxy-key&quot;: &quot;Bearer sk-123456&quot;}<span class=\"hljs-tag\" class=\"hljs-tag\">&lt;/<span class=\"hljs-name\" class=\"hljs-name\">textarea</span>&gt;</span>\n\n    <span class=\"hljs-tag\" class=\"hljs-tag\">&lt;<span class=\"hljs-name\" class=\"hljs-name\">button</span> <span class=\"hljs-attr\" class=\"hljs-attr\">onclick</span>=<span class=\"hljs-string\" class=\"hljs-string\">&quot;generateLink()&quot;</span>&gt;</span>ç”Ÿæˆå¹¶å¤åˆ¶é“¾æ¥<span class=\"hljs-tag\" class=\"hljs-tag\">&lt;/<span class=\"hljs-name\" class=\"hljs-name\">button</span>&gt;</span>\n\n    <span class=\"hljs-tag\" class=\"hljs-tag\">&lt;<span class=\"hljs-name\" class=\"hljs-name\">div</span> <span class=\"hljs-attr\" class=\"hljs-attr\">id</span>=<span class=\"hljs-string\" class=\"hljs-string\">&quot;result-container&quot;</span>&gt;</span>\n        <span class=\"hljs-tag\" class=\"hljs-tag\">&lt;<span class=\"hljs-name\" class=\"hljs-name\">label</span>&gt;</span>ç”Ÿæˆçš„ä¼ªåè®®å‰ç¼€ (ç‚¹å‡»ä¸‹æ–¹æ–¹æ¡†è‡ªåŠ¨å¤åˆ¶):<span class=\"hljs-tag\" class=\"hljs-tag\">&lt;/<span class=\"hljs-name\" class=\"hljs-name\">label</span>&gt;</span>\n        <span class=\"hljs-tag\" class=\"hljs-tag\">&lt;<span class=\"hljs-name\" class=\"hljs-name\">div</span> <span class=\"hljs-attr\" class=\"hljs-attr\">class</span>=<span class=\"hljs-string\" class=\"hljs-string\">&quot;result-box&quot;</span> <span class=\"hljs-attr\" class=\"hljs-attr\">id</span>=<span class=\"hljs-string\" class=\"hljs-string\">&quot;output&quot;</span> <span class=\"hljs-attr\" class=\"hljs-attr\">onclick</span>=<span class=\"hljs-string\" class=\"hljs-string\">&quot;copyToClipboard()&quot;</span>&gt;</span><span class=\"hljs-tag\" class=\"hljs-tag\">&lt;/<span class=\"hljs-name\" class=\"hljs-name\">div</span>&gt;</span>\n        <span class=\"hljs-tag\" class=\"hljs-tag\">&lt;<span class=\"hljs-name\" class=\"hljs-name\">div</span> <span class=\"hljs-attr\" class=\"hljs-attr\">id</span>=<span class=\"hljs-string\" class=\"hljs-string\">&quot;copyTip&quot;</span> <span class=\"hljs-attr\" class=\"hljs-attr\">class</span>=<span class=\"hljs-string\" class=\"hljs-string\">&quot;copy-tip&quot;</span>&gt;</span>âœ… å·²æˆåŠŸå¤åˆ¶åˆ°å‰ªè´´æ¿ï¼<span class=\"hljs-tag\" class=\"hljs-tag\">&lt;/<span class=\"hljs-name\" class=\"hljs-name\">div</span>&gt;</span>\n        <span class=\"hljs-tag\" class=\"hljs-tag\">&lt;<span class=\"hljs-name\" class=\"hljs-name\">p</span> <span class=\"hljs-attr\" class=\"hljs-attr\">style</span>=<span class=\"hljs-string\" class=\"hljs-string\">&quot;font-size: 12px; color: #6a737d; margin-top: 12px;&quot;</span>&gt;</span>\n            ğŸ’¡ æç¤ºï¼šåœ¨ä»£ç ä¸­è°ƒç”¨æ—¶ï¼Œç›´æ¥æ‹¼æ¥å…·ä½“è·¯å¾„ï¼Œä¾‹å¦‚ï¼š<span class=\"hljs-tag\" class=\"hljs-tag\">&lt;<span class=\"hljs-name\" class=\"hljs-name\">br</span>&gt;</span>\n            <span class=\"hljs-tag\" class=\"hljs-tag\">&lt;<span class=\"hljs-name\" class=\"hljs-name\">code</span>&gt;</span>fetch(prefix + &apos;/v1/chat/completions&apos;)<span class=\"hljs-tag\" class=\"hljs-tag\">&lt;/<span class=\"hljs-name\" class=\"hljs-name\">code</span>&gt;</span>\n        <span class=\"hljs-tag\" class=\"hljs-tag\">&lt;/<span class=\"hljs-name\" class=\"hljs-name\">p</span>&gt;</span>\n    <span class=\"hljs-tag\" class=\"hljs-tag\">&lt;/<span class=\"hljs-name\" class=\"hljs-name\">div</span>&gt;</span>\n<span class=\"hljs-tag\" class=\"hljs-tag\">&lt;/<span class=\"hljs-name\" class=\"hljs-name\">div</span>&gt;</span>\n\n<span class=\"hljs-tag\" class=\"hljs-tag\">&lt;<span class=\"hljs-name\" class=\"hljs-name\">script</span>&gt;</span></span><span class=\"javascript\" class=\"javascript\">\n    <span class=\"hljs-keyword\" class=\"hljs-keyword\">function</span> <span class=\"hljs-title,function_\" class=\"hljs-title,function_\">generateLink</span>(<span class=\"hljs-params\" class=\"hljs-params\"></span>) {\n        <span class=\"hljs-keyword\" class=\"hljs-keyword\">const</span> proxyUrl = <span class=\"hljs-variable,language_\" class=\"hljs-variable,language_\">document</span>.<span class=\"hljs-title,function_\" class=\"hljs-title,function_\">getElementById</span>(<span class=\"hljs-string\" class=\"hljs-string\">&apos;proxyUrl&apos;</span>).<span class=\"hljs-property\" class=\"hljs-property\">value</span>;\n        <span class=\"hljs-keyword\" class=\"hljs-keyword\">const</span> targetBase = <span class=\"hljs-variable,language_\" class=\"hljs-variable,language_\">document</span>.<span class=\"hljs-title,function_\" class=\"hljs-title,function_\">getElementById</span>(<span class=\"hljs-string\" class=\"hljs-string\">&apos;targetBase&apos;</span>).<span class=\"hljs-property\" class=\"hljs-property\">value</span>;\n        <span class=\"hljs-keyword\" class=\"hljs-keyword\">const</span> headersStr = <span class=\"hljs-variable,language_\" class=\"hljs-variable,language_\">document</span>.<span class=\"hljs-title,function_\" class=\"hljs-title,function_\">getElementById</span>(<span class=\"hljs-string\" class=\"hljs-string\">&apos;headers&apos;</span>).<span class=\"hljs-property\" class=\"hljs-property\">value</span>;\n\n        <span class=\"hljs-keyword\" class=\"hljs-keyword\">try</span> {\n            <span class=\"hljs-comment\" class=\"hljs-comment\">// æ ¡éªŒ JSON æ ¼å¼</span>\n            <span class=\"hljs-keyword\" class=\"hljs-keyword\">const</span> headers = <span class=\"hljs-title,class_\" class=\"hljs-title,class_\">JSON</span>.<span class=\"hljs-title,function_\" class=\"hljs-title,function_\">parse</span>(headersStr);\n            <span class=\"hljs-keyword\" class=\"hljs-keyword\">const</span> config = { proxyUrl, targetBase, headers };\n\n            <span class=\"hljs-comment\" class=\"hljs-comment\">// å®‰å…¨çš„ UTF-8 Base64 ç¼–ç é€»è¾‘</span>\n            <span class=\"hljs-keyword\" class=\"hljs-keyword\">const</span> jsonStr = <span class=\"hljs-title,class_\" class=\"hljs-title,class_\">JSON</span>.<span class=\"hljs-title,function_\" class=\"hljs-title,function_\">stringify</span>(config);\n            <span class=\"hljs-keyword\" class=\"hljs-keyword\">const</span> base64 = <span class=\"hljs-title,function_\" class=\"hljs-title,function_\">btoa</span>(<span class=\"hljs-built_in\" class=\"hljs-built_in\">encodeURIComponent</span>(jsonStr).<span class=\"hljs-title,function_\" class=\"hljs-title,function_\">replace</span>(<span class=\"hljs-regexp\" class=\"hljs-regexp\">/%([0-9A-F]{2})/g</span>, <span class=\"hljs-function\" class=\"hljs-function\">(<span class=\"hljs-params\" class=\"hljs-params\">match, p1</span>) =&gt;</span> {\n                <span class=\"hljs-keyword\" class=\"hljs-keyword\">return</span> <span class=\"hljs-title,class_\" class=\"hljs-title,class_\">String</span>.<span class=\"hljs-title,function_\" class=\"hljs-title,function_\">fromCharCode</span>(<span class=\"hljs-string\" class=\"hljs-string\">&apos;0x&apos;</span> + p1);\n            }));\n\n            <span class=\"hljs-keyword\" class=\"hljs-keyword\">const</span> finalUrl = <span class=\"hljs-string\" class=\"hljs-string\">`proxy://<span class=\"hljs-subst\" class=\"hljs-subst\">${base64}</span>@`</span>;\n            \n            <span class=\"hljs-comment\" class=\"hljs-comment\">// æ˜¾ç¤ºç»“æœ</span>\n            <span class=\"hljs-keyword\" class=\"hljs-keyword\">const</span> output = <span class=\"hljs-variable,language_\" class=\"hljs-variable,language_\">document</span>.<span class=\"hljs-title,function_\" class=\"hljs-title,function_\">getElementById</span>(<span class=\"hljs-string\" class=\"hljs-string\">&apos;output&apos;</span>);\n            output.<span class=\"hljs-property\" class=\"hljs-property\">innerText</span> = finalUrl;\n            <span class=\"hljs-variable,language_\" class=\"hljs-variable,language_\">document</span>.<span class=\"hljs-title,function_\" class=\"hljs-title,function_\">getElementById</span>(<span class=\"hljs-string\" class=\"hljs-string\">&apos;result-container&apos;</span>).<span class=\"hljs-property\" class=\"hljs-property\">style</span>.<span class=\"hljs-property\" class=\"hljs-property\">display</span> = <span class=\"hljs-string\" class=\"hljs-string\">&apos;block&apos;</span>;\n            \n            <span class=\"hljs-comment\" class=\"hljs-comment\">// è‡ªåŠ¨è§¦å‘ä¸€æ¬¡å¤åˆ¶</span>\n            <span class=\"hljs-title,function_\" class=\"hljs-title,function_\">copyToClipboard</span>(<span class=\"hljs-literal\" class=\"hljs-literal\">false</span>); \n        } <span class=\"hljs-keyword\" class=\"hljs-keyword\">catch</span> (e) {\n            <span class=\"hljs-title,function_\" class=\"hljs-title,function_\">alert</span>(<span class=\"hljs-string\" class=\"hljs-string\">&quot;âŒ é”™è¯¯ï¼šJSON æ ¼å¼ä¸æ­£ç¡®ï¼Œè¯·æ£€æŸ¥ Header å­—æ®µï¼&quot;</span>);\n        }\n    }\n\n    <span class=\"hljs-keyword\" class=\"hljs-keyword\">async</span> <span class=\"hljs-keyword\" class=\"hljs-keyword\">function</span> <span class=\"hljs-title,function_\" class=\"hljs-title,function_\">copyToClipboard</span>(<span class=\"hljs-params\" class=\"hljs-params\">showVisualFeedback = <span class=\"hljs-literal\" class=\"hljs-literal\">true</span></span>) {\n        <span class=\"hljs-keyword\" class=\"hljs-keyword\">const</span> text = <span class=\"hljs-variable,language_\" class=\"hljs-variable,language_\">document</span>.<span class=\"hljs-title,function_\" class=\"hljs-title,function_\">getElementById</span>(<span class=\"hljs-string\" class=\"hljs-string\">&apos;output&apos;</span>).<span class=\"hljs-property\" class=\"hljs-property\">innerText</span>;\n        <span class=\"hljs-keyword\" class=\"hljs-keyword\">if</span> (!text) <span class=\"hljs-keyword\" class=\"hljs-keyword\">return</span>;\n\n        <span class=\"hljs-keyword\" class=\"hljs-keyword\">try</span> {\n            <span class=\"hljs-keyword\" class=\"hljs-keyword\">await</span> navigator.<span class=\"hljs-property\" class=\"hljs-property\">clipboard</span>.<span class=\"hljs-title,function_\" class=\"hljs-title,function_\">writeText</span>(text);\n            \n            <span class=\"hljs-keyword\" class=\"hljs-keyword\">if</span> (showVisualFeedback) {\n                <span class=\"hljs-keyword\" class=\"hljs-keyword\">const</span> tip = <span class=\"hljs-variable,language_\" class=\"hljs-variable,language_\">document</span>.<span class=\"hljs-title,function_\" class=\"hljs-title,function_\">getElementById</span>(<span class=\"hljs-string\" class=\"hljs-string\">&apos;copyTip&apos;</span>);\n                tip.<span class=\"hljs-property\" class=\"hljs-property\">style</span>.<span class=\"hljs-property\" class=\"hljs-property\">display</span> = <span class=\"hljs-string\" class=\"hljs-string\">&apos;block&apos;</span>;\n                <span class=\"hljs-built_in\" class=\"hljs-built_in\">setTimeout</span>(<span class=\"hljs-function\" class=\"hljs-function\">() =&gt;</span> {\n                    tip.<span class=\"hljs-property\" class=\"hljs-property\">style</span>.<span class=\"hljs-property\" class=\"hljs-property\">display</span> = <span class=\"hljs-string\" class=\"hljs-string\">&apos;none&apos;</span>;\n                }, <span class=\"hljs-number\" class=\"hljs-number\">2000</span>);\n            }\n        } <span class=\"hljs-keyword\" class=\"hljs-keyword\">catch</span> (err) {\n            <span class=\"hljs-comment\" class=\"hljs-comment\">// é™çº§å¤„ç†</span>\n            <span class=\"hljs-keyword\" class=\"hljs-keyword\">const</span> textArea = <span class=\"hljs-variable,language_\" class=\"hljs-variable,language_\">document</span>.<span class=\"hljs-title,function_\" class=\"hljs-title,function_\">createElement</span>(<span class=\"hljs-string\" class=\"hljs-string\">&quot;textarea&quot;</span>);\n            textArea.<span class=\"hljs-property\" class=\"hljs-property\">value</span> = text;\n            <span class=\"hljs-variable,language_\" class=\"hljs-variable,language_\">document</span>.<span class=\"hljs-property\" class=\"hljs-property\">body</span>.<span class=\"hljs-title,function_\" class=\"hljs-title,function_\">appendChild</span>(textArea);\n            textArea.<span class=\"hljs-title,function_\" class=\"hljs-title,function_\">select</span>();\n            <span class=\"hljs-variable,language_\" class=\"hljs-variable,language_\">document</span>.<span class=\"hljs-title,function_\" class=\"hljs-title,function_\">execCommand</span>(<span class=\"hljs-string\" class=\"hljs-string\">&apos;copy&apos;</span>);\n            <span class=\"hljs-variable,language_\" class=\"hljs-variable,language_\">document</span>.<span class=\"hljs-property\" class=\"hljs-property\">body</span>.<span class=\"hljs-title,function_\" class=\"hljs-title,function_\">removeChild</span>(textArea);\n        }\n    }\n</span><span class=\"xml\" class=\"xml\"><span class=\"hljs-tag\" class=\"hljs-tag\">&lt;/<span class=\"hljs-name\" class=\"hljs-name\">script</span>&gt;</span></span></code></pre><div class=\"playground\" data-html=\"&lt;!-- reactive --&gt;\n    &lt;style&gt;\n        body { font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif; max-width: 600px; margin: 40px auto; padding: 20px; line-height: 1.6; color: #333; }\n        .card { border: 1px solid #e1e4e8; padding: 24px; border-radius: 12px; box-shadow: 0 8px 24px rgba(149,157,165,0.1); background: white; }\n        h2 { margin-top: 0; color: #0366d6; font-size: 1.5rem; }\n        label { display: block; margin-top: 15px; font-weight: 600; font-size: 0.9rem; color: #586069; }\n        input, textarea { width: 100%; padding: 10px; margin-top: 6px; box-sizing: border-box; border: 1px solid #d1d5da; border-radius: 6px; font-size: 14px; background: #fafbfc; transition: border 0.2s; }\n        input:focus, textarea:focus { border-color: #0366d6; outline: none; background: white; box-shadow: 0 0 0 3px rgba(3,102,214,0.1); }\n        button { background: #2ea44f; color: white; border: 1px solid rgba(27,31,35,0.15); padding: 12px; border-radius: 6px; cursor: pointer; margin-top: 24px; width: 100%; font-weight: 600; font-size: 16px; transition: background 0.2s; }\n        button:hover { background: #2c974b; }\n        \n        #result-container { margin-top: 24px; display: none; animation: fadeIn 0.3s ease; }\n        .result-box { \n            background: #f6f8fa; \n            padding: 15px; \n            word-break: break-all; \n            border: 1px dashed #0366d6; \n            border-radius: 6px; \n            font-family: &quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, monospace; \n            font-size: 13px;\n            cursor: pointer;\n            position: relative;\n            transition: background 0.2s;\n        }\n        .result-box:hover { background: #f0f3f6; }\n        .result-box::after { content: &quot;ç‚¹å‡»å¤åˆ¶&quot;; position: absolute; right: 8px; top: 4px; font-size: 10px; color: #0366d6; font-weight: bold; opacity: 0.7; }\n        \n        .copy-tip { color: #28a745; font-size: 12px; font-weight: bold; margin-top: 8px; display: none; text-align: center; }\n        \n        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }\n    &lt;/style&gt;\n\n&lt;div class=&quot;card&quot;&gt;\n    &lt;h2&gt;ğŸ”— Proxy åè®®ç”Ÿæˆå™¨&lt;/h2&gt;\n    \n    &lt;label&gt;ä»£ç†æœåŠ¡å™¨åœ°å€ (Proxy URL)&lt;/label&gt;\n    &lt;input type=&quot;text&quot; id=&quot;proxyUrl&quot; placeholder=&quot;https://my-server.com/proxy&quot; value=&quot;https://my-server.com/proxy&quot;&gt;\n\n    &lt;label&gt;ç›®æ ‡ API æ ¹è·¯å¾„ (Target Base)&lt;/label&gt;\n    &lt;input type=&quot;text&quot; id=&quot;targetBase&quot; placeholder=&quot;https://openai.com/api&quot; value=&quot;https://openai.com/api&quot;&gt;\n\n    &lt;label&gt;è‡ªå®šä¹‰ Header (JSON)&lt;/label&gt;\n    &lt;textarea id=&quot;headers&quot; rows=&quot;3&quot;&gt;{&quot;x-proxy-key&quot;: &quot;Bearer sk-123456&quot;}&lt;/textarea&gt;\n\n    &lt;button onclick=&quot;generateLink()&quot;&gt;ç”Ÿæˆå¹¶å¤åˆ¶é“¾æ¥&lt;/button&gt;\n\n    &lt;div id=&quot;result-container&quot;&gt;\n        &lt;label&gt;ç”Ÿæˆçš„ä¼ªåè®®å‰ç¼€ (ç‚¹å‡»ä¸‹æ–¹æ–¹æ¡†è‡ªåŠ¨å¤åˆ¶):&lt;/label&gt;\n        &lt;div class=&quot;result-box&quot; id=&quot;output&quot; onclick=&quot;copyToClipboard()&quot;&gt;&lt;/div&gt;\n        &lt;div id=&quot;copyTip&quot; class=&quot;copy-tip&quot;&gt;âœ… å·²æˆåŠŸå¤åˆ¶åˆ°å‰ªè´´æ¿ï¼&lt;/div&gt;\n        &lt;p style=&quot;font-size: 12px; color: #6a737d; margin-top: 12px;&quot;&gt;\n            ğŸ’¡ æç¤ºï¼šåœ¨ä»£ç ä¸­è°ƒç”¨æ—¶ï¼Œç›´æ¥æ‹¼æ¥å…·ä½“è·¯å¾„ï¼Œä¾‹å¦‚ï¼š&lt;br&gt;\n            &lt;code&gt;fetch(prefix + &apos;/v1/chat/completions&apos;)&lt;/code&gt;\n        &lt;/p&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n\n&lt;script&gt;\n    function generateLink() {\n        const proxyUrl = document.getElementById(&apos;proxyUrl&apos;).value;\n        const targetBase = document.getElementById(&apos;targetBase&apos;).value;\n        const headersStr = document.getElementById(&apos;headers&apos;).value;\n\n        try {\n            // æ ¡éªŒ JSON æ ¼å¼\n            const headers = JSON.parse(headersStr);\n            const config = { proxyUrl, targetBase, headers };\n\n            // å®‰å…¨çš„ UTF-8 Base64 ç¼–ç é€»è¾‘\n            const jsonStr = JSON.stringify(config);\n            const base64 = btoa(encodeURIComponent(jsonStr).replace(/%([0-9A-F]{2})/g, (match, p1) =&gt; {\n                return String.fromCharCode(&apos;0x&apos; + p1);\n            }));\n\n            const finalUrl = `proxy://${base64}@`;\n            \n            // æ˜¾ç¤ºç»“æœ\n            const output = document.getElementById(&apos;output&apos;);\n            output.innerText = finalUrl;\n            document.getElementById(&apos;result-container&apos;).style.display = &apos;block&apos;;\n            \n            // è‡ªåŠ¨è§¦å‘ä¸€æ¬¡å¤åˆ¶\n            copyToClipboard(false); \n        } catch (e) {\n            alert(&quot;âŒ é”™è¯¯ï¼šJSON æ ¼å¼ä¸æ­£ç¡®ï¼Œè¯·æ£€æŸ¥ Header å­—æ®µï¼&quot;);\n        }\n    }\n\n    async function copyToClipboard(showVisualFeedback = true) {\n        const text = document.getElementById(&apos;output&apos;).innerText;\n        if (!text) return;\n\n        try {\n            await navigator.clipboard.writeText(text);\n            \n            if (showVisualFeedback) {\n                const tip = document.getElementById(&apos;copyTip&apos;);\n                tip.style.display = &apos;block&apos;;\n                setTimeout(() =&gt; {\n                    tip.style.display = &apos;none&apos;;\n                }, 2000);\n            }\n        } catch (err) {\n            // é™çº§å¤„ç†\n            const textArea = document.createElement(&quot;textarea&quot;);\n            textArea.value = text;\n            document.body.appendChild(textArea);\n            textArea.select();\n            document.execCommand(&apos;copy&apos;);\n            document.body.removeChild(textArea);\n        }\n    }\n&lt;/script&gt;\"></div></div></div><script type=\"module\">const injectHtml = (root, html) => {\n  const iframe = document.createElement(\"iframe\");\n  const htmlContent = `<html><head></head><body>${html}</body></html>`;\n  iframe.style.width = \"100%\";\n  iframe.style.height = \"100%\";\n  iframe.onload = () => {\n    const doc = iframe.contentDocument || iframe.contentWindow?.document;\n    if (!doc) {\n      return;\n    }\n    doc.open();\n    doc.write(htmlContent);\n    doc.close();\n  };\n  root.replaceChildren(iframe);\n}\n  document.querySelectorAll('.playground')?.forEach(el=>{\n    const html = el.getAttribute('data-html');\n    if (html) {\n      injectHtml(el,html);\n    }\n    const indicator = document.createElement(\"div\");\n    indicator.className = \"indicator\";\n    const showCode = document.createElement(\"div\");\n    showCode.className = \"show-code\";\n    showCode.innerText = \"code\";\n    showCode.onclick = () => {\n      el.parentElement.classList.remove(\"preview-only\");\n    };\n    const showPreview = document.createElement(\"div\");\n    showPreview.className = \"show-preview\";\n    showPreview.innerText = \"preview\";\n    showPreview.onclick = () => {\n      el.parentElement.classList.add(\"preview-only\");\n    };\n    indicator.appendChild(showCode);\n    indicator.appendChild(showPreview);\n    el.parentElement.appendChild(indicator);\n    if (window.screen.width < 768) {\n      showPreview.click();\n    }\n  });</script>","id":"ä½¿ç”¨Relayrä»£ç†åè®®URL","path":"/posts/ä½¿ç”¨Relayrä»£ç†åè®®URL.json"}