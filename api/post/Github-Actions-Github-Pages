{"content":"{\"__ud_title\":\"å¦‚ä½•ä½¿ç”¨ Github Actions è‡ªåŠ¨æ„å»ºé™æ€é¡µé¢å¹¶éƒ¨ç½²åœ¨ Github Pages ä¸Š\",\"__ud_tags\":[],\"__ud_update_time\":1731893808715,\"__ud_create_time\":1731893807834,\"__ud_draft\":false,\"type\":\"doc\",\"content\":[{\"type\":\"heading\",\"attrs\":{\"level\":2},\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"å¦‚ä½•ä½¿ç”¨ Github Actions è‡ªåŠ¨æ„å»ºé™æ€é¡µé¢å¹¶éƒ¨ç½²åœ¨ Github Pages ä¸Š\"}]},{\"type\":\"heading\",\"attrs\":{\"level\":3},\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"æœ¬åœ°é…ç½®\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"åœ¨æœ¬åœ°é¡¹ç›®ä¸­æ–°å»ºæ–‡ä»¶å¤¹ \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\".github/workflows\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"åœ¨ \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"workflows\"},{\"type\":\"text\",\"text\":\" æ–‡ä»¶å¤¹ä¸­æ–°å»º \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"main.yml\"},{\"type\":\"text\",\"text\":\"ï¼Œç”¨äºé…ç½® github actionsï¼Œå†…å®¹å¦‚ä¸‹\"}]},{\"type\":\"codeBlock\",\"attrs\":{\"language\":\"yaml\"},\"content\":[{\"type\":\"text\",\"text\":\"name: GitHub Actions Build and Deploy\\non:\\n  push:\\n    branches:\\n      - main\\njobs:\\n  build-and-deploy:\\n    runs-on: ubuntu-latest\\n    steps:\\n      - name: Checkout ğŸ›ï¸\\n        uses: actions/checkout@v2.3.1\\n        with:\\n          persist-credentials: false\\n\\n      - name: Install and Build ğŸ”§\\n        run: |\\n          npm install\\n          npm run build\\n      - name: Deploy ğŸš€\\n        uses: JamesIves/github-pages-deploy-action@3.7.1\\n        with:\\n          ACCESS_TOKEN: ${{ secrets.ACCESS_TOKEN }}\\n          BRANCH: gh-pages\\n          FOLDER: dist\\n          CLEAN: true\\n\"}]},{\"type\":\"heading\",\"attrs\":{\"level\":3},\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"Github é…ç½®\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"æ–°å»ºä»“åº“\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"æ‰“å¼€\"},{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://github.com/settings/tokens\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\",\"class\":null}}],\"text\":\"Personal access tokens (\"},{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"http://github.com\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\",\"class\":null}}],\"text\":\"github.com\"},{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://github.com/settings/tokens\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\",\"class\":null}}],\"text\":\")\"},{\"type\":\"text\",\"text\":\"ï¼Œç‚¹å‡» \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"generate new token\"},{\"type\":\"text\",\"text\":\" æŒ‰é’®ï¼Œä¸ºæŒ‰é’®æ·»åŠ å¤‡æ³¨ï¼ˆnoteï¼‰ï¼Œä¾‹å¦‚ \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"github-actions-deploy\"},{\"type\":\"text\",\"text\":\"ï¼Œå‹¾é€‰ \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"repos\"},{\"type\":\"text\",\"text\":\" é€‰é¡¹ï¼Œç„¶åç‚¹å‡»å®Œæˆï¼Œè·³è½¬åçš„é¡µé¢ä¼šæœ‰ä¸€ä¸ª key æ˜¾ç¤ºå‡ºæ¥ï¼Œè¿™ä¸ª key åªä¼šåœ¨è¿™é‡Œæ˜¾ç¤ºä¸€æ¬¡ï¼Œä»¥åå°±çœ‹ä¸åˆ°äº†ï¼Œå¤åˆ¶è¿™ä¸ª key å¤‡ç”¨ã€‚\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"åœ¨æ–°å»ºçš„ä»“åº“ Settings ä¸­é€‰æ‹© secrets->actionsï¼Œç‚¹å‡» new repository secretï¼ŒName å¡« ACCESS_TOKENï¼Œvalue å¡«åˆšåˆšå¤åˆ¶çš„ keyï¼Œç„¶åä¿å­˜å³å¯ã€‚\"}]},{\"type\":\"heading\",\"attrs\":{\"level\":3},\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"éƒ¨ç½²\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"æŒ‰ç…§ github ä»“åº“çš„æç¤ºå°†æœ¬åœ° git é¡¹ç›®ä¸Šä¼ è‡³ githubï¼Œç‚¹å‡» actionsï¼Œä¼šå‘ç°æœ‰ä¸¤ä¸ª workflowï¼Œå¦ä¸€ä¸ªæ˜¯ github è‡ªå¸¦çš„ github pages éƒ¨ç½²ç”¨çš„ workflow \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"pages-build-deployment\"},{\"type\":\"text\",\"text\":\"ï¼Œå¯èƒ½ä¼šéƒ¨ç½²å¤±è´¥ï¼Œéœ€è¦è·³è½¬è‡³ä»“åº“ Setting->Pagesï¼Œå°†é¡¹ç›® Source æ”¹ä¸º \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"gh-pages\"},{\"type\":\"text\",\"text\":\"ï¼Œæ–‡ä»¶å¤¹é€‰æ‹© rootï¼Œå›åˆ° actions é¡µé¢ï¼Œä¼šå‘ç° workflow é‡æ–°è¿è¡Œï¼Œç¨ç­‰ä¸€ä¼šå°±èƒ½åœ¨ github pages åœ°å€ä¸­è®¿é—®çœ‹åˆ°éƒ¨ç½²çš„é™æ€é¡µé¢äº†ã€‚\"}]}]}","title":"å¦‚ä½•ä½¿ç”¨ Github Actions è‡ªåŠ¨æ„å»ºé™æ€é¡µé¢å¹¶éƒ¨ç½²åœ¨ Github Pages ä¸Š","tags":[],"updateTime":1731893808715,"createTime":1731893807834,"draft":false,"intro":"åœ¨æœ¬åœ°é¡¹ç›®ä¸­æ–°å»ºæ–‡ä»¶å¤¹ .github/workflows","html":"<h2 level=\"2\"><strong>å¦‚ä½•ä½¿ç”¨ Github Actions è‡ªåŠ¨æ„å»ºé™æ€é¡µé¢å¹¶éƒ¨ç½²åœ¨ Github Pages ä¸Š</strong></h2><h3 level=\"3\"><strong>æœ¬åœ°é…ç½®</strong></h3><p>åœ¨æœ¬åœ°é¡¹ç›®ä¸­æ–°å»ºæ–‡ä»¶å¤¹ <code>.github/workflows</code></p><p>åœ¨ <code>workflows</code> æ–‡ä»¶å¤¹ä¸­æ–°å»º <code>main.yml</code>ï¼Œç”¨äºé…ç½® github actionsï¼Œå†…å®¹å¦‚ä¸‹</p><div class=\"llt-code readonly\"><div class=\"language\">yaml</div><div class=\"wrapper\"><pre><code class=\"language-yaml\"><span class=\"hljs-attr\" class=\"hljs-attr\">name:</span> <span class=\"hljs-string\" class=\"hljs-string\">GitHub</span> <span class=\"hljs-string\" class=\"hljs-string\">Actions</span> <span class=\"hljs-string\" class=\"hljs-string\">Build</span> <span class=\"hljs-string\" class=\"hljs-string\">and</span> <span class=\"hljs-string\" class=\"hljs-string\">Deploy</span>\n<span class=\"hljs-attr\" class=\"hljs-attr\">on:</span>\n  <span class=\"hljs-attr\" class=\"hljs-attr\">push:</span>\n    <span class=\"hljs-attr\" class=\"hljs-attr\">branches:</span>\n      <span class=\"hljs-bullet\" class=\"hljs-bullet\">-</span> <span class=\"hljs-string\" class=\"hljs-string\">main</span>\n<span class=\"hljs-attr\" class=\"hljs-attr\">jobs:</span>\n  <span class=\"hljs-attr\" class=\"hljs-attr\">build-and-deploy:</span>\n    <span class=\"hljs-attr\" class=\"hljs-attr\">runs-on:</span> <span class=\"hljs-string\" class=\"hljs-string\">ubuntu-latest</span>\n    <span class=\"hljs-attr\" class=\"hljs-attr\">steps:</span>\n      <span class=\"hljs-bullet\" class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\" class=\"hljs-attr\">name:</span> <span class=\"hljs-string\" class=\"hljs-string\">Checkout</span> <span class=\"hljs-string\" class=\"hljs-string\">ğŸ›ï¸</span>\n        <span class=\"hljs-attr\" class=\"hljs-attr\">uses:</span> <span class=\"hljs-string\" class=\"hljs-string\">actions/checkout@v2.3.1</span>\n        <span class=\"hljs-attr\" class=\"hljs-attr\">with:</span>\n          <span class=\"hljs-attr\" class=\"hljs-attr\">persist-credentials:</span> <span class=\"hljs-literal\" class=\"hljs-literal\">false</span>\n\n      <span class=\"hljs-bullet\" class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\" class=\"hljs-attr\">name:</span> <span class=\"hljs-string\" class=\"hljs-string\">Install</span> <span class=\"hljs-string\" class=\"hljs-string\">and</span> <span class=\"hljs-string\" class=\"hljs-string\">Build</span> <span class=\"hljs-string\" class=\"hljs-string\">ğŸ”§</span>\n        <span class=\"hljs-attr\" class=\"hljs-attr\">run:</span> <span class=\"hljs-string\" class=\"hljs-string\">|\n          npm install\n          npm run build\n</span>      <span class=\"hljs-bullet\" class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\" class=\"hljs-attr\">name:</span> <span class=\"hljs-string\" class=\"hljs-string\">Deploy</span> <span class=\"hljs-string\" class=\"hljs-string\">ğŸš€</span>\n        <span class=\"hljs-attr\" class=\"hljs-attr\">uses:</span> <span class=\"hljs-string\" class=\"hljs-string\">JamesIves/github-pages-deploy-action@3.7.1</span>\n        <span class=\"hljs-attr\" class=\"hljs-attr\">with:</span>\n          <span class=\"hljs-attr\" class=\"hljs-attr\">ACCESS_TOKEN:</span> <span class=\"hljs-string\" class=\"hljs-string\">${{</span> <span class=\"hljs-string\" class=\"hljs-string\">secrets.ACCESS_TOKEN</span> <span class=\"hljs-string\" class=\"hljs-string\">}}</span>\n          <span class=\"hljs-attr\" class=\"hljs-attr\">BRANCH:</span> <span class=\"hljs-string\" class=\"hljs-string\">gh-pages</span>\n          <span class=\"hljs-attr\" class=\"hljs-attr\">FOLDER:</span> <span class=\"hljs-string\" class=\"hljs-string\">dist</span>\n          <span class=\"hljs-attr\" class=\"hljs-attr\">CLEAN:</span> <span class=\"hljs-literal\" class=\"hljs-literal\">true</span>\n</code></pre></div></div><h3 level=\"3\"><strong>Github é…ç½®</strong></h3><p>æ–°å»ºä»“åº“</p><p>æ‰“å¼€<a target=\"_blank\" rel=\"noopener noreferrer nofollow\" href=\"https://github.com/settings/tokens\">Personal access tokens (</a><a target=\"_blank\" rel=\"noopener noreferrer nofollow\" href=\"http://github.com\">github.com</a><a target=\"_blank\" rel=\"noopener noreferrer nofollow\" href=\"https://github.com/settings/tokens\">)</a>ï¼Œç‚¹å‡» <code>generate new token</code> æŒ‰é’®ï¼Œä¸ºæŒ‰é’®æ·»åŠ å¤‡æ³¨ï¼ˆnoteï¼‰ï¼Œä¾‹å¦‚ <code>github-actions-deploy</code>ï¼Œå‹¾é€‰ <code>repos</code> é€‰é¡¹ï¼Œç„¶åç‚¹å‡»å®Œæˆï¼Œè·³è½¬åçš„é¡µé¢ä¼šæœ‰ä¸€ä¸ª key æ˜¾ç¤ºå‡ºæ¥ï¼Œè¿™ä¸ª key åªä¼šåœ¨è¿™é‡Œæ˜¾ç¤ºä¸€æ¬¡ï¼Œä»¥åå°±çœ‹ä¸åˆ°äº†ï¼Œå¤åˆ¶è¿™ä¸ª key å¤‡ç”¨ã€‚</p><p>åœ¨æ–°å»ºçš„ä»“åº“ Settings ä¸­é€‰æ‹© secrets-&gt;actionsï¼Œç‚¹å‡» new repository secretï¼ŒName å¡« ACCESS_TOKENï¼Œvalue å¡«åˆšåˆšå¤åˆ¶çš„ keyï¼Œç„¶åä¿å­˜å³å¯ã€‚</p><h3 level=\"3\"><strong>éƒ¨ç½²</strong></h3><p>æŒ‰ç…§ github ä»“åº“çš„æç¤ºå°†æœ¬åœ° git é¡¹ç›®ä¸Šä¼ è‡³ githubï¼Œç‚¹å‡» actionsï¼Œä¼šå‘ç°æœ‰ä¸¤ä¸ª workflowï¼Œå¦ä¸€ä¸ªæ˜¯ github è‡ªå¸¦çš„ github pages éƒ¨ç½²ç”¨çš„ workflow <code>pages-build-deployment</code>ï¼Œå¯èƒ½ä¼šéƒ¨ç½²å¤±è´¥ï¼Œéœ€è¦è·³è½¬è‡³ä»“åº“ Setting-&gt;Pagesï¼Œå°†é¡¹ç›® Source æ”¹ä¸º <code>gh-pages</code>ï¼Œæ–‡ä»¶å¤¹é€‰æ‹© rootï¼Œå›åˆ° actions é¡µé¢ï¼Œä¼šå‘ç° workflow é‡æ–°è¿è¡Œï¼Œç¨ç­‰ä¸€ä¼šå°±èƒ½åœ¨ github pages åœ°å€ä¸­è®¿é—®çœ‹åˆ°éƒ¨ç½²çš„é™æ€é¡µé¢äº†ã€‚</p><script type=\"module\">const injectHtml = (root, html) => {\n  const iframe = document.createElement(\"iframe\");\n  const htmlContent = `<html><head></head><body>${html}</body></html>`;\n  iframe.style.width = \"100%\";\n  iframe.style.height = \"100%\";\n  iframe.onload = () => {\n    const doc = iframe.contentDocument || iframe.contentWindow?.document;\n    if (!doc) {\n      return;\n    }\n    doc.open();\n    doc.write(htmlContent);\n    doc.close();\n  };\n  root.replaceChildren(iframe);\n}\n  document.querySelectorAll('.playground')?.forEach(el=>{\n    const html = el.getAttribute('data-html');\n    if (html) {\n      injectHtml(el,html);\n    }\n    const indicator = document.createElement(\"div\");\n    indicator.className = \"indicator\";\n    const showCode = document.createElement(\"div\");\n    showCode.className = \"show-code\";\n    showCode.innerText = \"code\";\n    showCode.onclick = () => {\n      el.parentElement.classList.remove(\"preview-only\");\n    };\n    const showPreview = document.createElement(\"div\");\n    showPreview.className = \"show-preview\";\n    showPreview.innerText = \"preview\";\n    showPreview.onclick = () => {\n      el.parentElement.classList.add(\"preview-only\");\n    };\n    indicator.appendChild(showCode);\n    indicator.appendChild(showPreview);\n    el.parentElement.appendChild(indicator);\n    if (window.screen.width < 768) {\n      showPreview.click();\n    }\n  });</script>","id":"Github-Actions-Github-Pages","path":"/posts/Github-Actions-Github-Pages.json"}