<!DOCTYPE html> <html lang="en"> <head><meta charset="UTF-8"><link rel="apple-touch-icon-precomposed" sizes="144x144" href="/favicon.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="apple-mobile-web-app-title" content="Link AI"><meta name="msapplication-TileColor" content="#000000"><meta name="viewport" content="width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"><meta name="description" content="åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°è·¨åŸŸã€éœ€è¦åŠ¨æ€æ›´æ¢ API ä»£ç†æˆ–æ˜¯åœ¨è¯·æ±‚å¤´ä¸­æ³¨å…¥é‰´æƒä¿¡æ¯çš„éœ€æ±‚ã€‚æœ¬æ–‡å°†ä»‹ç»ä¸€ç§é€šè¿‡ Fetch åŠ«æŒ ç»“åˆ è‡ªå®šä¹‰ä¼ªåè®® çš„æ–¹æ¡ˆï¼Œå®ç°ä¸€å¥—ä¼˜é›…ä¸”çµæ´»çš„ä»£ç†ä¸­é—´ä»¶ã€‚"><link rel="icon" href="/favicon.ico"><!-- Google Tag Manager --><script>
      (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ "gtm.start": new Date().getTime(), event: "gtm.js" });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != "dataLayer" ? "&l=" + l : "";
        j.async = true;
        j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, "script", "dataLayer", "GTM-WGC4G65Z");
    </script><!-- End Google Tag Manager --><title>ä½¿ç”¨Relayrä»£ç†åè®®URL | Link AI</title><link rel="stylesheet" href="/_astro/_page_.BiKo2xiw.css">
<style>.outlines a[data-anchor-tag=H1]{margin-left:0}.outlines a[data-anchor-tag=H2]{margin-left:12px}.outlines a[data-anchor-tag=H3]{margin-left:24px}.outlines a[data-anchor-tag=H4]{margin-left:36px}.outlines a[data-anchor-tag=H5]{margin-left:48px}.outlines a[data-anchor-tag=H6]{margin-left:60px}
._tabset_selm3_1 ._tab-panel_selm3_1{display:none}._tabset_selm3_1 ._tab-panels_selm3_4{display:flex}._tabset_selm3_1 input[data-tab-name=direct]{display:none}._tabset_selm3_1 input[data-tab-name=direct]:checked~._tab-panels_selm3_4 ._tab-panel_selm3_1[data-tab-name=direct]{display:block}._tabset_selm3_1 input[data-tab-name=direct]:checked~._tab-labels_selm3_13 label[data-tab-name=direct]{border-bottom:2px solid red}._tabset_selm3_1 input[data-tab-name=app]{display:none}._tabset_selm3_1 input[data-tab-name=app]:checked~._tab-panels_selm3_4 ._tab-panel_selm3_1[data-tab-name=app]{display:block}._tabset_selm3_1 input[data-tab-name=app]:checked~._tab-labels_selm3_13 label[data-tab-name=app]{border-bottom:2px solid red}
</style>
<link rel="stylesheet" href="/_astro/_page_.BIc4xYU2.css">
<link rel="stylesheet" href="/_astro/_id_.snf5k5wG.css"><script type="module" src="/_astro/hoisted.DXwR34hd.js"></script></head> <body class="text-text bg-bg"> <!-- Google Tag Manager (noscript) --> <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WGC4G65Z" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript> <!-- End Google Tag Manager (noscript) --> <header class="flex justify-between items-center p-2 gap-2 h-10"> <a href="/" class="text-button text-lg" aria-label="homepage"> <div class="i-ri:menu-4-fill"></div> </a> <div class="flex gap-2 items-center header-operations">   <div id="auth"></div> </div> </header>  <main> <div class="content"> <div class="w-full flex gap-2 pb-2">  <a href="/tag/Cent" class="rounded hover:bg-gray-200 dark:hover:bg-modal px-3 py-1 cursor-pointer">
#Cent </a> </div> <div class="ud-root read-only flex-1"><h1 level="1" id="ä½¿ç”¨Relayrä»£ç†åè®®URL">ä½¿ç”¨Relayrä»£ç†åè®®URL</h1><p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°è·¨åŸŸã€éœ€è¦åŠ¨æ€æ›´æ¢ API ä»£ç†æˆ–æ˜¯åœ¨è¯·æ±‚å¤´ä¸­æ³¨å…¥é‰´æƒä¿¡æ¯çš„éœ€æ±‚ã€‚æœ¬æ–‡å°†ä»‹ç»ä¸€ç§é€šè¿‡ <strong>Fetch åŠ«æŒ</strong> ç»“åˆ <strong>è‡ªå®šä¹‰ä¼ªåè®®</strong> çš„æ–¹æ¡ˆï¼Œå®ç°ä¸€å¥—ä¼˜é›…ä¸”çµæ´»çš„ä»£ç†ä¸­é—´ä»¶ã€‚</p><blockquote><p>åœ¨Centä¸­ï¼Œæ‰€æœ‰å…è®¸è¾“å…¥è‡ªå®šä¹‰URLçš„åœ°æ–¹éƒ½æ”¯æŒRelayråè®®è‡ªå®šä¹‰ä»£ç†ï¼Œä½†æ˜¯ä½ éœ€è¦è‡ªå·±å®ç°ä¸€ä¸ªæ”¯æŒè¯¥åè®®çš„åç«¯æœåŠ¡ï¼Œå¯ä»¥é€šè¿‡Cloudflare Workersæˆ–è€…Supabase Edge Functionéƒ¨ç½²ã€‚</p></blockquote><h2 level="2" id="1-åè®®è®¾è®¡">1. åè®®è®¾è®¡</h2><p>ä¼ ç»Ÿçš„ URL ä¼ å‚å®¹æ˜“å—åˆ°ç‰¹æ®Šå­—ç¬¦ï¼ˆå¦‚ JSON ä¸­çš„å¼•å·ã€å¤§æ‹¬å·ï¼‰çš„å½±å“ï¼Œå¯¼è‡´è§£æå¤±è´¥ã€‚æˆ‘ä»¬é‡‡ç”¨ <strong>Base64 ç¼–ç é…ç½®</strong> çš„æ–¹æ¡ˆï¼š</p><h3 level="3" id="åè®®æ ¼å¼">åè®®æ ¼å¼</h3><p><code>proxy://&lt;base64_config&gt;@&lt;target_path_suffix&gt;</code></p><ul><li><p><code>proxy://</code>: åè®®å¤´ï¼Œç”¨äºä¸­é—´ä»¶è¯†åˆ«ã€‚</p></li><li><p><code>&lt;base64_config&gt;</code>: åŒ…å«ä»£ç†æœåŠ¡å™¨åœ°å€ã€ç›®æ ‡åŸºå‡†åœ°å€ã€é¢å¤– Header çš„ JSON å¯¹è±¡ï¼Œå¹¶ç»è¿‡ Base64 ç¼–ç ã€‚</p></li><li><p><code>@</code>: åˆ†éš”ç¬¦ã€‚</p></li><li><p><code>&lt;target_path_suffix&gt;</code>: å…·ä½“çš„ API è·¯å¾„åç¼€ã€‚</p></li></ul><h3 level="3" id="æ•°æ®ç»“æ„ç¤ºä¾‹">æ•°æ®ç»“æ„ç¤ºä¾‹</h3><p>ç¼–ç å‰çš„ JSON é…ç½®ï¼š</p><p>JSON</p><div class="llt-code readonly"><div class="language">json</div><div class="wrapper"><pre><code class="language-json"><span class="hljs-punctuation" class="hljs-punctuation">{</span>
  <span class="hljs-attr" class="hljs-attr">&quot;proxyUrl&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-string" class="hljs-string">&quot;https://my-server.com/proxy&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">,</span>
  <span class="hljs-attr" class="hljs-attr">&quot;targetBase&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-string" class="hljs-string">&quot;https://api.openai.com&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">,</span>
  <span class="hljs-attr" class="hljs-attr">&quot;headers&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-punctuation" class="hljs-punctuation">{</span>
    <span class="hljs-attr" class="hljs-attr">&quot;x-proxy-key&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-string" class="hljs-string">&quot;Bearer sk-123&quot;</span>
  <span class="hljs-punctuation" class="hljs-punctuation">}</span>
<span class="hljs-punctuation" class="hljs-punctuation">}</span>
</code></pre></div></div><hr><h2 level="2" id="2-å‰ç«¯ä¸­é—´ä»¶å®ç°">2. å‰ç«¯ä¸­é—´ä»¶å®ç°</h2><p>åŸºäºä½ å·²æœ‰çš„ <code>registerProxy</code> åŠ«æŒæ¡†æ¶ï¼Œæˆ‘ä»¬ç¼–å†™å¦‚ä¸‹è§£æé€»è¾‘ï¼š</p><p>TypeScript</p><div class="llt-code readonly"><div class="language">javascript</div><div class="wrapper"><pre><code class="language-javascript"><span class="hljs-keyword" class="hljs-keyword">const</span> <span class="hljs-attr" class="hljs-attr">proxyMiddleware</span>: <span class="hljs-title,class_" class="hljs-title,class_">Handler</span> = <span class="hljs-title,function_" class="hljs-title,function_">async</span> (url, options, next) =&gt; {
    <span class="hljs-keyword" class="hljs-keyword">const</span> urlStr = url.<span class="hljs-title,function_" class="hljs-title,function_">toString</span>();

    <span class="hljs-comment" class="hljs-comment">// 1. è¯†åˆ«åè®®</span>
    <span class="hljs-keyword" class="hljs-keyword">if</span> (!urlStr.<span class="hljs-title,function_" class="hljs-title,function_">startsWith</span>(<span class="hljs-string" class="hljs-string">&apos;proxy://&apos;</span>)) {
        <span class="hljs-keyword" class="hljs-keyword">return</span> <span class="hljs-title,function_" class="hljs-title,function_">next</span>(url, options);
    }

    <span class="hljs-keyword" class="hljs-keyword">try</span> {
        <span class="hljs-comment" class="hljs-comment">// 2. æ‹†åˆ† Base64 é…ç½®ä¸è·¯å¾„åç¼€</span>
        <span class="hljs-keyword" class="hljs-keyword">const</span> mainPart = urlStr.<span class="hljs-title,function_" class="hljs-title,function_">slice</span>(<span class="hljs-number" class="hljs-number">8</span>); <span class="hljs-comment" class="hljs-comment">// ç§»é™¤ &apos;proxy://&apos;</span>
        <span class="hljs-keyword" class="hljs-keyword">const</span> [configBase64, ...pathParts] = mainPart.<span class="hljs-title,function_" class="hljs-title,function_">split</span>(<span class="hljs-string" class="hljs-string">&apos;@&apos;</span>);
        <span class="hljs-keyword" class="hljs-keyword">const</span> targetPathSuffix = pathParts.<span class="hljs-title,function_" class="hljs-title,function_">join</span>(<span class="hljs-string" class="hljs-string">&apos;@&apos;</span>); <span class="hljs-comment" class="hljs-comment">// é˜²æ­¢è·¯å¾„ä¸­ä¹Ÿå¸¦æœ‰ @</span>

        <span class="hljs-comment" class="hljs-comment">// 3. è§£ç å¹¶è§£æé…ç½®</span>
        <span class="hljs-keyword" class="hljs-keyword">const</span> configJson = <span class="hljs-title,class_" class="hljs-title,class_">JSON</span>.<span class="hljs-title,function_" class="hljs-title,function_">parse</span>(<span class="hljs-title,function_" class="hljs-title,function_">atob</span>(configBase64));
        <span class="hljs-keyword" class="hljs-keyword">const</span> { proxyUrl, targetBase, <span class="hljs-attr" class="hljs-attr">headers</span>: extraHeaders } = configJson;

        <span class="hljs-comment" class="hljs-comment">// æ‹¼æ¥æœ€ç»ˆç›®æ ‡åœ°å€</span>
        <span class="hljs-keyword" class="hljs-keyword">const</span> finalTargetUrl = <span class="hljs-string" class="hljs-string">`<span class="hljs-subst" class="hljs-subst">${targetBase}</span><span class="hljs-subst" class="hljs-subst">${targetPathSuffix}</span>`</span>;

        <span class="hljs-comment" class="hljs-comment">// 4. è½¬æ¢è¯·æ±‚å‚æ•°</span>
        <span class="hljs-keyword" class="hljs-keyword">const</span> <span class="hljs-attr" class="hljs-attr">newOptions</span>: <span class="hljs-title,class_" class="hljs-title,class_">RequestInit</span> = {
            ...options,
            <span class="hljs-attr" class="hljs-attr">method</span>: <span class="hljs-string" class="hljs-string">&apos;POST&apos;</span>, <span class="hljs-comment" class="hljs-comment">// ä»£ç†è¯·æ±‚ç»Ÿä¸€è½¬ä¸º POST ä»¥ä¾¿åœ¨ Body ä¸­æºå¸¦ target</span>
            <span class="hljs-attr" class="hljs-attr">headers</span>: {
                ...options.<span class="hljs-property" class="hljs-property">headers</span>,
                ...extraHeaders,
                <span class="hljs-string" class="hljs-string">&apos;Content-Type&apos;</span>: <span class="hljs-string" class="hljs-string">&apos;application/json&apos;</span>
            },
            <span class="hljs-attr" class="hljs-attr">body</span>: <span class="hljs-title,class_" class="hljs-title,class_">JSON</span>.<span class="hljs-title,function_" class="hljs-title,function_">stringify</span>({
                <span class="hljs-attr" class="hljs-attr">target</span>: finalTargetUrl,
                <span class="hljs-attr" class="hljs-attr">payload</span>: options.<span class="hljs-property" class="hljs-property">body</span> ? 
                         (<span class="hljs-keyword" class="hljs-keyword">typeof</span> options.<span class="hljs-property" class="hljs-property">body</span> === <span class="hljs-string" class="hljs-string">&apos;string&apos;</span> ? <span class="hljs-title,class_" class="hljs-title,class_">JSON</span>.<span class="hljs-title,function_" class="hljs-title,function_">parse</span>(options.<span class="hljs-property" class="hljs-property">body</span>) : options.<span class="hljs-property" class="hljs-property">body</span>) 
                         : <span class="hljs-literal" class="hljs-literal">null</span>
            })
        };

        <span class="hljs-variable,language_" class="hljs-variable,language_">console</span>.<span class="hljs-title,function_" class="hljs-title,function_">log</span>(<span class="hljs-string" class="hljs-string">`[Proxy] Forwarding to: <span class="hljs-subst" class="hljs-subst">${finalTargetUrl}</span>`</span>);
        <span class="hljs-keyword" class="hljs-keyword">return</span> <span class="hljs-title,function_" class="hljs-title,function_">next</span>(proxyUrl, newOptions);
    } <span class="hljs-keyword" class="hljs-keyword">catch</span> (err) {
        <span class="hljs-variable,language_" class="hljs-variable,language_">console</span>.<span class="hljs-title,function_" class="hljs-title,function_">error</span>(<span class="hljs-string" class="hljs-string">&quot;[Proxy Error]&quot;</span>, err);
        <span class="hljs-keyword" class="hljs-keyword">return</span> <span class="hljs-title,function_" class="hljs-title,function_">next</span>(url, options);
    }
};
</code></pre></div></div><hr><h2 level="2" id="3-ä»£ç†åç«¯å®ç°-Nodejs-ç¤ºä¾‹">3. ä»£ç†åç«¯å®ç° (Node.js ç¤ºä¾‹)</h2><p>åç«¯ä»£ç†æœåŠ¡å™¨éœ€è¦æ¥æ”¶ <code>POST</code> è¯·æ±‚ï¼Œè§£æå…¶ä¸­çš„ <code>target</code> å­—æ®µï¼Œå¹¶æºå¸¦è¯·æ±‚å¤´è½¬å‘ã€‚</p><p>JavaScript</p><div class="llt-code readonly"><div class="language">javascript</div><div class="wrapper"><pre><code class="language-javascript"><span class="hljs-keyword" class="hljs-keyword">const</span> express = <span class="hljs-built_in" class="hljs-built_in">require</span>(<span class="hljs-string" class="hljs-string">&apos;express&apos;</span>);
<span class="hljs-keyword" class="hljs-keyword">const</span> axios = <span class="hljs-built_in" class="hljs-built_in">require</span>(<span class="hljs-string" class="hljs-string">&apos;axios&apos;</span>);
<span class="hljs-keyword" class="hljs-keyword">const</span> app = <span class="hljs-title,function_" class="hljs-title,function_">express</span>();

app.<span class="hljs-title,function_" class="hljs-title,function_">use</span>(express.<span class="hljs-title,function_" class="hljs-title,function_">json</span>());

app.<span class="hljs-title,function_" class="hljs-title,function_">post</span>(<span class="hljs-string" class="hljs-string">&apos;/proxy&apos;</span>, <span class="hljs-title,function_" class="hljs-title,function_">async</span> (req, res) =&gt; {
    <span class="hljs-keyword" class="hljs-keyword">const</span> { target, payload } = req.<span class="hljs-property" class="hljs-property">body</span>;
    
    <span class="hljs-comment" class="hljs-comment">// è·å–å‰ç«¯æ³¨å…¥çš„é¢å¤– Header (ä¾‹å¦‚ x-proxy-key)</span>
    <span class="hljs-keyword" class="hljs-keyword">const</span> proxyHeaders = { ...req.<span class="hljs-property" class="hljs-property">headers</span> };
    <span class="hljs-comment" class="hljs-comment">// ç§»é™¤å®¿ä¸»ä¿¡æ¯ï¼Œé˜²æ­¢ç›®æ ‡æœåŠ¡å™¨æ ¡éªŒå¤±è´¥</span>
    <span class="hljs-keyword" class="hljs-keyword">delete</span> proxyHeaders.<span class="hljs-property" class="hljs-property">host</span>; 

    <span class="hljs-keyword" class="hljs-keyword">try</span> {
        <span class="hljs-variable,language_" class="hljs-variable,language_">console</span>.<span class="hljs-title,function_" class="hljs-title,function_">log</span>(<span class="hljs-string" class="hljs-string">`Forwarding request to: <span class="hljs-subst" class="hljs-subst">${target}</span>`</span>);
        
        <span class="hljs-keyword" class="hljs-keyword">const</span> response = <span class="hljs-keyword" class="hljs-keyword">await</span> <span class="hljs-title,function_" class="hljs-title,function_">axios</span>({
            <span class="hljs-attr" class="hljs-attr">method</span>: <span class="hljs-string" class="hljs-string">&apos;POST&apos;</span>, <span class="hljs-comment" class="hljs-comment">// æˆ–æ ¹æ®é€»è¾‘é€ä¼ åŸ method</span>
            <span class="hljs-attr" class="hljs-attr">url</span>: target,
            <span class="hljs-attr" class="hljs-attr">data</span>: payload,
            <span class="hljs-attr" class="hljs-attr">headers</span>: proxyHeaders,
            <span class="hljs-attr" class="hljs-attr">timeout</span>: <span class="hljs-number" class="hljs-number">10000</span>
        });

        res.<span class="hljs-title,function_" class="hljs-title,function_">status</span>(response.<span class="hljs-property" class="hljs-property">status</span>).<span class="hljs-title,function_" class="hljs-title,function_">send</span>(response.<span class="hljs-property" class="hljs-property">data</span>);
    } <span class="hljs-keyword" class="hljs-keyword">catch</span> (error) {
        <span class="hljs-keyword" class="hljs-keyword">const</span> status = error.<span class="hljs-property" class="hljs-property">response</span> ? error.<span class="hljs-property" class="hljs-property">response</span>.<span class="hljs-property" class="hljs-property">status</span> : <span class="hljs-number" class="hljs-number">500</span>;
        res.<span class="hljs-title,function_" class="hljs-title,function_">status</span>(status).<span class="hljs-title,function_" class="hljs-title,function_">send</span>(error.<span class="hljs-property" class="hljs-property">message</span>);
    }
});

app.<span class="hljs-title,function_" class="hljs-title,function_">listen</span>(<span class="hljs-number" class="hljs-number">3000</span>, <span class="hljs-function" class="hljs-function">() =&gt;</span> <span class="hljs-variable,language_" class="hljs-variable,language_">console</span>.<span class="hljs-title,function_" class="hljs-title,function_">log</span>(<span class="hljs-string" class="hljs-string">&apos;Proxy Server running on port 3000&apos;</span>));
</code></pre></div></div><hr><h2 level="2" id="4-å¦‚ä½•ä½¿ç”¨">4. å¦‚ä½•ä½¿ç”¨</h2><p>åœ¨ä¸šåŠ¡ä»£ç ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡å·¥å…·å‡½æ•°ç”Ÿæˆè¿™ä¸ªå¤åˆ URLï¼š</p><h3 level="3" id="ç”Ÿæˆå™¨å·¥å…·">ç”Ÿæˆå™¨å·¥å…·</h3><p>JavaScript</p><div class="llt-code readonly"><div class="language">javascript</div><div class="wrapper"><pre><code class="language-javascript"><span class="hljs-keyword" class="hljs-keyword">function</span> <span class="hljs-title,function_" class="hljs-title,function_">createProxyUrl</span>(<span class="hljs-params" class="hljs-params">config, apiPath</span>) {
    <span class="hljs-keyword" class="hljs-keyword">const</span> base64 = <span class="hljs-title,function_" class="hljs-title,function_">btoa</span>(<span class="hljs-title,class_" class="hljs-title,class_">JSON</span>.<span class="hljs-title,function_" class="hljs-title,function_">stringify</span>(config));
    <span class="hljs-keyword" class="hljs-keyword">return</span> <span class="hljs-string" class="hljs-string">`proxy://<span class="hljs-subst" class="hljs-subst">${base64}</span>@<span class="hljs-subst" class="hljs-subst">${apiPath}</span>`</span>;
}
</code></pre></div></div><h3 level="3" id="å‘èµ·è¯·æ±‚">å‘èµ·è¯·æ±‚</h3><p>JavaScript</p><div class="llt-code readonly"><div class="language">javascript</div><div class="wrapper"><pre><code class="language-javascript"><span class="hljs-keyword" class="hljs-keyword">const</span> config = {
    <span class="hljs-attr" class="hljs-attr">proxyUrl</span>: <span class="hljs-string" class="hljs-string">&quot;http://localhost:3000/proxy&quot;</span>,
    <span class="hljs-attr" class="hljs-attr">targetBase</span>: <span class="hljs-string" class="hljs-string">&quot;https://api.openai.com&quot;</span>,
    <span class="hljs-attr" class="hljs-attr">headers</span>: { <span class="hljs-string" class="hljs-string">&quot;Authorization&quot;</span>: <span class="hljs-string" class="hljs-string">&quot;Bearer TOKEN&quot;</span> }
};

<span class="hljs-comment" class="hljs-comment">// å®é™…è¯·æ±‚åœ°å€ï¼šproxy://ey...@{config}@/v1/chat/completions</span>
<span class="hljs-title,function_" class="hljs-title,function_">fetch</span>(<span class="hljs-title,function_" class="hljs-title,function_">createProxyUrl</span>(config, <span class="hljs-string" class="hljs-string">&apos;/v1/chat/completions&apos;</span>), {
    <span class="hljs-attr" class="hljs-attr">method</span>: <span class="hljs-string" class="hljs-string">&apos;POST&apos;</span>,
    <span class="hljs-attr" class="hljs-attr">body</span>: <span class="hljs-title,class_" class="hljs-title,class_">JSON</span>.<span class="hljs-title,function_" class="hljs-title,function_">stringify</span>({ <span class="hljs-attr" class="hljs-attr">model</span>: <span class="hljs-string" class="hljs-string">&apos;gpt-3.5-turbo&apos;</span> })
});
</code></pre></div></div><hr><h2 level="2" id="5-æ€»ç»“">5. æ€»ç»“</h2><p>è¯¥æ–¹æ¡ˆçš„ä¼˜åŠ¿åœ¨äºï¼š</p><ol><li><p><strong>é«˜åº¦å°è£…</strong>ï¼šä¸šåŠ¡ä»£ç æ— éœ€å…³å¿ƒä»£ç†æœåŠ¡å™¨çš„å…·ä½“å®ç°ã€‚</p></li><li><p><strong>å…¼å®¹æ€§å¼º</strong>ï¼šBase64 é¿å…äº† URL ç‰¹æ®Šå­—ç¬¦å¸¦æ¥çš„è§£æå™©æ¢¦ã€‚</p></li><li><p><strong>åŠ¨æ€æ€§</strong>ï¼šå¯ä»¥éšæ—¶åœ¨å‰ç«¯é€šè¿‡ä¿®æ”¹ <code>config</code> æ¥åˆ‡æ¢ä¸åŒçš„ä»£ç†èŠ‚ç‚¹æˆ–ç›®æ ‡ APIã€‚</p></li></ol><blockquote><p><strong>æ³¨æ„</strong>ï¼šç”±äº Base64 ç¼–ç ä¼šå¢åŠ å­—ç¬¦ä¸²ä½“ç§¯ï¼Œä¸” URL é•¿åº¦åœ¨ä¸åŒæµè§ˆå™¨ä¸­æœ‰é™åˆ¶ï¼ˆå¦‚ Chrome é™åˆ¶ä¸º 2MBï¼‰ï¼Œæœ¬æ–¹æ¡ˆé€‚ç”¨äºé…ç½®ä¿¡æ¯ä¸­ç­‰çš„åœºæ™¯ã€‚</p></blockquote><hr><h2 level="2" id="Demo">Demo</h2><div class="llt-code readonly"><div class="language">html</div><div class="wrapper"><pre><code class="language-html"><span class="hljs-comment" class="hljs-comment">&lt;!-- reactive --&gt;</span><span class="xml" class="xml">
    <span class="hljs-tag" class="hljs-tag">&lt;<span class="hljs-name" class="hljs-name">style</span>&gt;</span></span><span class="css" class="css">
        <span class="hljs-selector-tag" class="hljs-selector-tag">body</span> { <span class="hljs-attribute" class="hljs-attribute">font-family</span>: -apple-system, BlinkMacSystemFont, <span class="hljs-string" class="hljs-string">&quot;Segoe UI&quot;</span>, Helvetica, Arial, sans-serif; <span class="hljs-attribute" class="hljs-attribute">max-width</span>: <span class="hljs-number" class="hljs-number">600px</span>; <span class="hljs-attribute" class="hljs-attribute">margin</span>: <span class="hljs-number" class="hljs-number">40px</span> auto; <span class="hljs-attribute" class="hljs-attribute">padding</span>: <span class="hljs-number" class="hljs-number">20px</span>; <span class="hljs-attribute" class="hljs-attribute">line-height</span>: <span class="hljs-number" class="hljs-number">1.6</span>; <span class="hljs-attribute" class="hljs-attribute">color</span>: <span class="hljs-number" class="hljs-number">#333</span>; }
        <span class="hljs-selector-class" class="hljs-selector-class">.card</span> { <span class="hljs-attribute" class="hljs-attribute">border</span>: <span class="hljs-number" class="hljs-number">1px</span> solid <span class="hljs-number" class="hljs-number">#e1e4e8</span>; <span class="hljs-attribute" class="hljs-attribute">padding</span>: <span class="hljs-number" class="hljs-number">24px</span>; <span class="hljs-attribute" class="hljs-attribute">border-radius</span>: <span class="hljs-number" class="hljs-number">12px</span>; <span class="hljs-attribute" class="hljs-attribute">box-shadow</span>: <span class="hljs-number" class="hljs-number">0</span> <span class="hljs-number" class="hljs-number">8px</span> <span class="hljs-number" class="hljs-number">24px</span> <span class="hljs-built_in" class="hljs-built_in">rgba</span>(<span class="hljs-number" class="hljs-number">149</span>,<span class="hljs-number" class="hljs-number">157</span>,<span class="hljs-number" class="hljs-number">165</span>,<span class="hljs-number" class="hljs-number">0.1</span>); <span class="hljs-attribute" class="hljs-attribute">background</span>: white; }
        <span class="hljs-selector-tag" class="hljs-selector-tag">h2</span> { <span class="hljs-attribute" class="hljs-attribute">margin-top</span>: <span class="hljs-number" class="hljs-number">0</span>; <span class="hljs-attribute" class="hljs-attribute">color</span>: <span class="hljs-number" class="hljs-number">#0366d6</span>; <span class="hljs-attribute" class="hljs-attribute">font-size</span>: <span class="hljs-number" class="hljs-number">1.5rem</span>; }
        <span class="hljs-selector-tag" class="hljs-selector-tag">label</span> { <span class="hljs-attribute" class="hljs-attribute">display</span>: block; <span class="hljs-attribute" class="hljs-attribute">margin-top</span>: <span class="hljs-number" class="hljs-number">15px</span>; <span class="hljs-attribute" class="hljs-attribute">font-weight</span>: <span class="hljs-number" class="hljs-number">600</span>; <span class="hljs-attribute" class="hljs-attribute">font-size</span>: <span class="hljs-number" class="hljs-number">0.9rem</span>; <span class="hljs-attribute" class="hljs-attribute">color</span>: <span class="hljs-number" class="hljs-number">#586069</span>; }
        <span class="hljs-selector-tag" class="hljs-selector-tag">input</span>, <span class="hljs-selector-tag" class="hljs-selector-tag">textarea</span> { <span class="hljs-attribute" class="hljs-attribute">width</span>: <span class="hljs-number" class="hljs-number">100%</span>; <span class="hljs-attribute" class="hljs-attribute">padding</span>: <span class="hljs-number" class="hljs-number">10px</span>; <span class="hljs-attribute" class="hljs-attribute">margin-top</span>: <span class="hljs-number" class="hljs-number">6px</span>; <span class="hljs-attribute" class="hljs-attribute">box-sizing</span>: border-box; <span class="hljs-attribute" class="hljs-attribute">border</span>: <span class="hljs-number" class="hljs-number">1px</span> solid <span class="hljs-number" class="hljs-number">#d1d5da</span>; <span class="hljs-attribute" class="hljs-attribute">border-radius</span>: <span class="hljs-number" class="hljs-number">6px</span>; <span class="hljs-attribute" class="hljs-attribute">font-size</span>: <span class="hljs-number" class="hljs-number">14px</span>; <span class="hljs-attribute" class="hljs-attribute">background</span>: <span class="hljs-number" class="hljs-number">#fafbfc</span>; <span class="hljs-attribute" class="hljs-attribute">transition</span>: border <span class="hljs-number" class="hljs-number">0.2s</span>; }
        <span class="hljs-selector-tag" class="hljs-selector-tag">input</span><span class="hljs-selector-pseudo" class="hljs-selector-pseudo">:focus</span>, <span class="hljs-selector-tag" class="hljs-selector-tag">textarea</span><span class="hljs-selector-pseudo" class="hljs-selector-pseudo">:focus</span> { <span class="hljs-attribute" class="hljs-attribute">border-color</span>: <span class="hljs-number" class="hljs-number">#0366d6</span>; <span class="hljs-attribute" class="hljs-attribute">outline</span>: none; <span class="hljs-attribute" class="hljs-attribute">background</span>: white; <span class="hljs-attribute" class="hljs-attribute">box-shadow</span>: <span class="hljs-number" class="hljs-number">0</span> <span class="hljs-number" class="hljs-number">0</span> <span class="hljs-number" class="hljs-number">0</span> <span class="hljs-number" class="hljs-number">3px</span> <span class="hljs-built_in" class="hljs-built_in">rgba</span>(<span class="hljs-number" class="hljs-number">3</span>,<span class="hljs-number" class="hljs-number">102</span>,<span class="hljs-number" class="hljs-number">214</span>,<span class="hljs-number" class="hljs-number">0.1</span>); }
        <span class="hljs-selector-tag" class="hljs-selector-tag">button</span> { <span class="hljs-attribute" class="hljs-attribute">background</span>: <span class="hljs-number" class="hljs-number">#2ea44f</span>; <span class="hljs-attribute" class="hljs-attribute">color</span>: white; <span class="hljs-attribute" class="hljs-attribute">border</span>: <span class="hljs-number" class="hljs-number">1px</span> solid <span class="hljs-built_in" class="hljs-built_in">rgba</span>(<span class="hljs-number" class="hljs-number">27</span>,<span class="hljs-number" class="hljs-number">31</span>,<span class="hljs-number" class="hljs-number">35</span>,<span class="hljs-number" class="hljs-number">0.15</span>); <span class="hljs-attribute" class="hljs-attribute">padding</span>: <span class="hljs-number" class="hljs-number">12px</span>; <span class="hljs-attribute" class="hljs-attribute">border-radius</span>: <span class="hljs-number" class="hljs-number">6px</span>; <span class="hljs-attribute" class="hljs-attribute">cursor</span>: pointer; <span class="hljs-attribute" class="hljs-attribute">margin-top</span>: <span class="hljs-number" class="hljs-number">24px</span>; <span class="hljs-attribute" class="hljs-attribute">width</span>: <span class="hljs-number" class="hljs-number">100%</span>; <span class="hljs-attribute" class="hljs-attribute">font-weight</span>: <span class="hljs-number" class="hljs-number">600</span>; <span class="hljs-attribute" class="hljs-attribute">font-size</span>: <span class="hljs-number" class="hljs-number">16px</span>; <span class="hljs-attribute" class="hljs-attribute">transition</span>: background <span class="hljs-number" class="hljs-number">0.2s</span>; }
        <span class="hljs-selector-tag" class="hljs-selector-tag">button</span><span class="hljs-selector-pseudo" class="hljs-selector-pseudo">:hover</span> { <span class="hljs-attribute" class="hljs-attribute">background</span>: <span class="hljs-number" class="hljs-number">#2c974b</span>; }
        
        <span class="hljs-selector-id" class="hljs-selector-id">#result-container</span> { <span class="hljs-attribute" class="hljs-attribute">margin-top</span>: <span class="hljs-number" class="hljs-number">24px</span>; <span class="hljs-attribute" class="hljs-attribute">display</span>: none; <span class="hljs-attribute" class="hljs-attribute">animation</span>: fadeIn <span class="hljs-number" class="hljs-number">0.3s</span> ease; }
        <span class="hljs-selector-class" class="hljs-selector-class">.result-box</span> { 
            <span class="hljs-attribute" class="hljs-attribute">background</span>: <span class="hljs-number" class="hljs-number">#f6f8fa</span>; 
            <span class="hljs-attribute" class="hljs-attribute">padding</span>: <span class="hljs-number" class="hljs-number">15px</span>; 
            <span class="hljs-attribute" class="hljs-attribute">word-break</span>: break-all; 
            <span class="hljs-attribute" class="hljs-attribute">border</span>: <span class="hljs-number" class="hljs-number">1px</span> dashed <span class="hljs-number" class="hljs-number">#0366d6</span>; 
            <span class="hljs-attribute" class="hljs-attribute">border-radius</span>: <span class="hljs-number" class="hljs-number">6px</span>; 
            <span class="hljs-attribute" class="hljs-attribute">font-family</span>: <span class="hljs-string" class="hljs-string">&quot;SFMono-Regular&quot;</span>, Consolas, <span class="hljs-string" class="hljs-string">&quot;Liberation Mono&quot;</span>, Menlo, monospace; 
            <span class="hljs-attribute" class="hljs-attribute">font-size</span>: <span class="hljs-number" class="hljs-number">13px</span>;
            <span class="hljs-attribute" class="hljs-attribute">cursor</span>: pointer;
            <span class="hljs-attribute" class="hljs-attribute">position</span>: relative;
            <span class="hljs-attribute" class="hljs-attribute">transition</span>: background <span class="hljs-number" class="hljs-number">0.2s</span>;
        }
        <span class="hljs-selector-class" class="hljs-selector-class">.result-box</span><span class="hljs-selector-pseudo" class="hljs-selector-pseudo">:hover</span> { <span class="hljs-attribute" class="hljs-attribute">background</span>: <span class="hljs-number" class="hljs-number">#f0f3f6</span>; }
        <span class="hljs-selector-class" class="hljs-selector-class">.result-box</span><span class="hljs-selector-pseudo" class="hljs-selector-pseudo">::after</span> { <span class="hljs-attribute" class="hljs-attribute">content</span>: <span class="hljs-string" class="hljs-string">&quot;ç‚¹å‡»å¤åˆ¶&quot;</span>; <span class="hljs-attribute" class="hljs-attribute">position</span>: absolute; <span class="hljs-attribute" class="hljs-attribute">right</span>: <span class="hljs-number" class="hljs-number">8px</span>; <span class="hljs-attribute" class="hljs-attribute">top</span>: <span class="hljs-number" class="hljs-number">4px</span>; <span class="hljs-attribute" class="hljs-attribute">font-size</span>: <span class="hljs-number" class="hljs-number">10px</span>; <span class="hljs-attribute" class="hljs-attribute">color</span>: <span class="hljs-number" class="hljs-number">#0366d6</span>; <span class="hljs-attribute" class="hljs-attribute">font-weight</span>: bold; <span class="hljs-attribute" class="hljs-attribute">opacity</span>: <span class="hljs-number" class="hljs-number">0.7</span>; }
        
        <span class="hljs-selector-class" class="hljs-selector-class">.copy-tip</span> { <span class="hljs-attribute" class="hljs-attribute">color</span>: <span class="hljs-number" class="hljs-number">#28a745</span>; <span class="hljs-attribute" class="hljs-attribute">font-size</span>: <span class="hljs-number" class="hljs-number">12px</span>; <span class="hljs-attribute" class="hljs-attribute">font-weight</span>: bold; <span class="hljs-attribute" class="hljs-attribute">margin-top</span>: <span class="hljs-number" class="hljs-number">8px</span>; <span class="hljs-attribute" class="hljs-attribute">display</span>: none; <span class="hljs-attribute" class="hljs-attribute">text-align</span>: center; }
        
        <span class="hljs-keyword" class="hljs-keyword">@keyframes</span> fadeIn { <span class="hljs-selector-tag" class="hljs-selector-tag">from</span> { <span class="hljs-attribute" class="hljs-attribute">opacity</span>: <span class="hljs-number" class="hljs-number">0</span>; <span class="hljs-attribute" class="hljs-attribute">transform</span>: <span class="hljs-built_in" class="hljs-built_in">translateY</span>(<span class="hljs-number" class="hljs-number">10px</span>); } <span class="hljs-selector-tag" class="hljs-selector-tag">to</span> { <span class="hljs-attribute" class="hljs-attribute">opacity</span>: <span class="hljs-number" class="hljs-number">1</span>; <span class="hljs-attribute" class="hljs-attribute">transform</span>: <span class="hljs-built_in" class="hljs-built_in">translateY</span>(<span class="hljs-number" class="hljs-number">0</span>); } }
</span><span class="xml" class="xml">    <span class="hljs-tag" class="hljs-tag">&lt;/<span class="hljs-name" class="hljs-name">style</span>&gt;</span>

<span class="hljs-tag" class="hljs-tag">&lt;<span class="hljs-name" class="hljs-name">div</span> <span class="hljs-attr" class="hljs-attr">class</span>=<span class="hljs-string" class="hljs-string">&quot;card&quot;</span>&gt;</span>
    <span class="hljs-tag" class="hljs-tag">&lt;<span class="hljs-name" class="hljs-name">h2</span>&gt;</span>ğŸ”— Proxy åè®®ç”Ÿæˆå™¨<span class="hljs-tag" class="hljs-tag">&lt;/<span class="hljs-name" class="hljs-name">h2</span>&gt;</span>
    
    <span class="hljs-tag" class="hljs-tag">&lt;<span class="hljs-name" class="hljs-name">label</span>&gt;</span>ä»£ç†æœåŠ¡å™¨åœ°å€ (Proxy URL)<span class="hljs-tag" class="hljs-tag">&lt;/<span class="hljs-name" class="hljs-name">label</span>&gt;</span>
    <span class="hljs-tag" class="hljs-tag">&lt;<span class="hljs-name" class="hljs-name">input</span> <span class="hljs-attr" class="hljs-attr">type</span>=<span class="hljs-string" class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr" class="hljs-attr">id</span>=<span class="hljs-string" class="hljs-string">&quot;proxyUrl&quot;</span> <span class="hljs-attr" class="hljs-attr">placeholder</span>=<span class="hljs-string" class="hljs-string">&quot;https://my-server.com/proxy&quot;</span> <span class="hljs-attr" class="hljs-attr">value</span>=<span class="hljs-string" class="hljs-string">&quot;https://my-server.com/proxy&quot;</span>&gt;</span>

    <span class="hljs-tag" class="hljs-tag">&lt;<span class="hljs-name" class="hljs-name">label</span>&gt;</span>ç›®æ ‡ API æ ¹è·¯å¾„ (Target Base)<span class="hljs-tag" class="hljs-tag">&lt;/<span class="hljs-name" class="hljs-name">label</span>&gt;</span>
    <span class="hljs-tag" class="hljs-tag">&lt;<span class="hljs-name" class="hljs-name">input</span> <span class="hljs-attr" class="hljs-attr">type</span>=<span class="hljs-string" class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr" class="hljs-attr">id</span>=<span class="hljs-string" class="hljs-string">&quot;targetBase&quot;</span> <span class="hljs-attr" class="hljs-attr">placeholder</span>=<span class="hljs-string" class="hljs-string">&quot;https://openai.com/api&quot;</span> <span class="hljs-attr" class="hljs-attr">value</span>=<span class="hljs-string" class="hljs-string">&quot;https://openai.com/api&quot;</span>&gt;</span>

    <span class="hljs-tag" class="hljs-tag">&lt;<span class="hljs-name" class="hljs-name">label</span>&gt;</span>è‡ªå®šä¹‰ Header (JSON)<span class="hljs-tag" class="hljs-tag">&lt;/<span class="hljs-name" class="hljs-name">label</span>&gt;</span>
    <span class="hljs-tag" class="hljs-tag">&lt;<span class="hljs-name" class="hljs-name">textarea</span> <span class="hljs-attr" class="hljs-attr">id</span>=<span class="hljs-string" class="hljs-string">&quot;headers&quot;</span> <span class="hljs-attr" class="hljs-attr">rows</span>=<span class="hljs-string" class="hljs-string">&quot;3&quot;</span>&gt;</span>{&quot;x-proxy-key&quot;: &quot;Bearer sk-123456&quot;}<span class="hljs-tag" class="hljs-tag">&lt;/<span class="hljs-name" class="hljs-name">textarea</span>&gt;</span>

    <span class="hljs-tag" class="hljs-tag">&lt;<span class="hljs-name" class="hljs-name">button</span> <span class="hljs-attr" class="hljs-attr">onclick</span>=<span class="hljs-string" class="hljs-string">&quot;generateLink()&quot;</span>&gt;</span>ç”Ÿæˆå¹¶å¤åˆ¶é“¾æ¥<span class="hljs-tag" class="hljs-tag">&lt;/<span class="hljs-name" class="hljs-name">button</span>&gt;</span>

    <span class="hljs-tag" class="hljs-tag">&lt;<span class="hljs-name" class="hljs-name">div</span> <span class="hljs-attr" class="hljs-attr">id</span>=<span class="hljs-string" class="hljs-string">&quot;result-container&quot;</span>&gt;</span>
        <span class="hljs-tag" class="hljs-tag">&lt;<span class="hljs-name" class="hljs-name">label</span>&gt;</span>ç”Ÿæˆçš„ä¼ªåè®®å‰ç¼€ (ç‚¹å‡»ä¸‹æ–¹æ–¹æ¡†è‡ªåŠ¨å¤åˆ¶):<span class="hljs-tag" class="hljs-tag">&lt;/<span class="hljs-name" class="hljs-name">label</span>&gt;</span>
        <span class="hljs-tag" class="hljs-tag">&lt;<span class="hljs-name" class="hljs-name">div</span> <span class="hljs-attr" class="hljs-attr">class</span>=<span class="hljs-string" class="hljs-string">&quot;result-box&quot;</span> <span class="hljs-attr" class="hljs-attr">id</span>=<span class="hljs-string" class="hljs-string">&quot;output&quot;</span> <span class="hljs-attr" class="hljs-attr">onclick</span>=<span class="hljs-string" class="hljs-string">&quot;copyToClipboard()&quot;</span>&gt;</span><span class="hljs-tag" class="hljs-tag">&lt;/<span class="hljs-name" class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag" class="hljs-tag">&lt;<span class="hljs-name" class="hljs-name">div</span> <span class="hljs-attr" class="hljs-attr">id</span>=<span class="hljs-string" class="hljs-string">&quot;copyTip&quot;</span> <span class="hljs-attr" class="hljs-attr">class</span>=<span class="hljs-string" class="hljs-string">&quot;copy-tip&quot;</span>&gt;</span>âœ… å·²æˆåŠŸå¤åˆ¶åˆ°å‰ªè´´æ¿ï¼<span class="hljs-tag" class="hljs-tag">&lt;/<span class="hljs-name" class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag" class="hljs-tag">&lt;<span class="hljs-name" class="hljs-name">p</span> <span class="hljs-attr" class="hljs-attr">style</span>=<span class="hljs-string" class="hljs-string">&quot;font-size: 12px; color: #6a737d; margin-top: 12px;&quot;</span>&gt;</span>
            ğŸ’¡ æç¤ºï¼šåœ¨ä»£ç ä¸­è°ƒç”¨æ—¶ï¼Œç›´æ¥æ‹¼æ¥å…·ä½“è·¯å¾„ï¼Œä¾‹å¦‚ï¼š<span class="hljs-tag" class="hljs-tag">&lt;<span class="hljs-name" class="hljs-name">br</span>&gt;</span>
            <span class="hljs-tag" class="hljs-tag">&lt;<span class="hljs-name" class="hljs-name">code</span>&gt;</span>fetch(prefix + &apos;/v1/chat/completions&apos;)<span class="hljs-tag" class="hljs-tag">&lt;/<span class="hljs-name" class="hljs-name">code</span>&gt;</span>
        <span class="hljs-tag" class="hljs-tag">&lt;/<span class="hljs-name" class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag" class="hljs-tag">&lt;/<span class="hljs-name" class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag" class="hljs-tag">&lt;/<span class="hljs-name" class="hljs-name">div</span>&gt;</span>

<span class="hljs-tag" class="hljs-tag">&lt;<span class="hljs-name" class="hljs-name">script</span>&gt;</span></span><span class="javascript" class="javascript">
    <span class="hljs-keyword" class="hljs-keyword">function</span> <span class="hljs-title,function_" class="hljs-title,function_">generateLink</span>(<span class="hljs-params" class="hljs-params"></span>) {
        <span class="hljs-keyword" class="hljs-keyword">const</span> proxyUrl = <span class="hljs-variable,language_" class="hljs-variable,language_">document</span>.<span class="hljs-title,function_" class="hljs-title,function_">getElementById</span>(<span class="hljs-string" class="hljs-string">&apos;proxyUrl&apos;</span>).<span class="hljs-property" class="hljs-property">value</span>;
        <span class="hljs-keyword" class="hljs-keyword">const</span> targetBase = <span class="hljs-variable,language_" class="hljs-variable,language_">document</span>.<span class="hljs-title,function_" class="hljs-title,function_">getElementById</span>(<span class="hljs-string" class="hljs-string">&apos;targetBase&apos;</span>).<span class="hljs-property" class="hljs-property">value</span>;
        <span class="hljs-keyword" class="hljs-keyword">const</span> headersStr = <span class="hljs-variable,language_" class="hljs-variable,language_">document</span>.<span class="hljs-title,function_" class="hljs-title,function_">getElementById</span>(<span class="hljs-string" class="hljs-string">&apos;headers&apos;</span>).<span class="hljs-property" class="hljs-property">value</span>;

        <span class="hljs-keyword" class="hljs-keyword">try</span> {
            <span class="hljs-comment" class="hljs-comment">// æ ¡éªŒ JSON æ ¼å¼</span>
            <span class="hljs-keyword" class="hljs-keyword">const</span> headers = <span class="hljs-title,class_" class="hljs-title,class_">JSON</span>.<span class="hljs-title,function_" class="hljs-title,function_">parse</span>(headersStr);
            <span class="hljs-keyword" class="hljs-keyword">const</span> config = { proxyUrl, targetBase, headers };

            <span class="hljs-comment" class="hljs-comment">// å®‰å…¨çš„ UTF-8 Base64 ç¼–ç é€»è¾‘</span>
            <span class="hljs-keyword" class="hljs-keyword">const</span> jsonStr = <span class="hljs-title,class_" class="hljs-title,class_">JSON</span>.<span class="hljs-title,function_" class="hljs-title,function_">stringify</span>(config);
            <span class="hljs-keyword" class="hljs-keyword">const</span> base64 = <span class="hljs-title,function_" class="hljs-title,function_">btoa</span>(<span class="hljs-built_in" class="hljs-built_in">encodeURIComponent</span>(jsonStr).<span class="hljs-title,function_" class="hljs-title,function_">replace</span>(<span class="hljs-regexp" class="hljs-regexp">/%([0-9A-F]{2})/g</span>, <span class="hljs-function" class="hljs-function">(<span class="hljs-params" class="hljs-params">match, p1</span>) =&gt;</span> {
                <span class="hljs-keyword" class="hljs-keyword">return</span> <span class="hljs-title,class_" class="hljs-title,class_">String</span>.<span class="hljs-title,function_" class="hljs-title,function_">fromCharCode</span>(<span class="hljs-string" class="hljs-string">&apos;0x&apos;</span> + p1);
            }));

            <span class="hljs-keyword" class="hljs-keyword">const</span> finalUrl = <span class="hljs-string" class="hljs-string">`proxy://<span class="hljs-subst" class="hljs-subst">${base64}</span>@`</span>;
            
            <span class="hljs-comment" class="hljs-comment">// æ˜¾ç¤ºç»“æœ</span>
            <span class="hljs-keyword" class="hljs-keyword">const</span> output = <span class="hljs-variable,language_" class="hljs-variable,language_">document</span>.<span class="hljs-title,function_" class="hljs-title,function_">getElementById</span>(<span class="hljs-string" class="hljs-string">&apos;output&apos;</span>);
            output.<span class="hljs-property" class="hljs-property">innerText</span> = finalUrl;
            <span class="hljs-variable,language_" class="hljs-variable,language_">document</span>.<span class="hljs-title,function_" class="hljs-title,function_">getElementById</span>(<span class="hljs-string" class="hljs-string">&apos;result-container&apos;</span>).<span class="hljs-property" class="hljs-property">style</span>.<span class="hljs-property" class="hljs-property">display</span> = <span class="hljs-string" class="hljs-string">&apos;block&apos;</span>;
            
            <span class="hljs-comment" class="hljs-comment">// è‡ªåŠ¨è§¦å‘ä¸€æ¬¡å¤åˆ¶</span>
            <span class="hljs-title,function_" class="hljs-title,function_">copyToClipboard</span>(<span class="hljs-literal" class="hljs-literal">false</span>); 
        } <span class="hljs-keyword" class="hljs-keyword">catch</span> (e) {
            <span class="hljs-title,function_" class="hljs-title,function_">alert</span>(<span class="hljs-string" class="hljs-string">&quot;âŒ é”™è¯¯ï¼šJSON æ ¼å¼ä¸æ­£ç¡®ï¼Œè¯·æ£€æŸ¥ Header å­—æ®µï¼&quot;</span>);
        }
    }

    <span class="hljs-keyword" class="hljs-keyword">async</span> <span class="hljs-keyword" class="hljs-keyword">function</span> <span class="hljs-title,function_" class="hljs-title,function_">copyToClipboard</span>(<span class="hljs-params" class="hljs-params">showVisualFeedback = <span class="hljs-literal" class="hljs-literal">true</span></span>) {
        <span class="hljs-keyword" class="hljs-keyword">const</span> text = <span class="hljs-variable,language_" class="hljs-variable,language_">document</span>.<span class="hljs-title,function_" class="hljs-title,function_">getElementById</span>(<span class="hljs-string" class="hljs-string">&apos;output&apos;</span>).<span class="hljs-property" class="hljs-property">innerText</span>;
        <span class="hljs-keyword" class="hljs-keyword">if</span> (!text) <span class="hljs-keyword" class="hljs-keyword">return</span>;

        <span class="hljs-keyword" class="hljs-keyword">try</span> {
            <span class="hljs-keyword" class="hljs-keyword">await</span> navigator.<span class="hljs-property" class="hljs-property">clipboard</span>.<span class="hljs-title,function_" class="hljs-title,function_">writeText</span>(text);
            
            <span class="hljs-keyword" class="hljs-keyword">if</span> (showVisualFeedback) {
                <span class="hljs-keyword" class="hljs-keyword">const</span> tip = <span class="hljs-variable,language_" class="hljs-variable,language_">document</span>.<span class="hljs-title,function_" class="hljs-title,function_">getElementById</span>(<span class="hljs-string" class="hljs-string">&apos;copyTip&apos;</span>);
                tip.<span class="hljs-property" class="hljs-property">style</span>.<span class="hljs-property" class="hljs-property">display</span> = <span class="hljs-string" class="hljs-string">&apos;block&apos;</span>;
                <span class="hljs-built_in" class="hljs-built_in">setTimeout</span>(<span class="hljs-function" class="hljs-function">() =&gt;</span> {
                    tip.<span class="hljs-property" class="hljs-property">style</span>.<span class="hljs-property" class="hljs-property">display</span> = <span class="hljs-string" class="hljs-string">&apos;none&apos;</span>;
                }, <span class="hljs-number" class="hljs-number">2000</span>);
            }
        } <span class="hljs-keyword" class="hljs-keyword">catch</span> (err) {
            <span class="hljs-comment" class="hljs-comment">// é™çº§å¤„ç†</span>
            <span class="hljs-keyword" class="hljs-keyword">const</span> textArea = <span class="hljs-variable,language_" class="hljs-variable,language_">document</span>.<span class="hljs-title,function_" class="hljs-title,function_">createElement</span>(<span class="hljs-string" class="hljs-string">&quot;textarea&quot;</span>);
            textArea.<span class="hljs-property" class="hljs-property">value</span> = text;
            <span class="hljs-variable,language_" class="hljs-variable,language_">document</span>.<span class="hljs-property" class="hljs-property">body</span>.<span class="hljs-title,function_" class="hljs-title,function_">appendChild</span>(textArea);
            textArea.<span class="hljs-title,function_" class="hljs-title,function_">select</span>();
            <span class="hljs-variable,language_" class="hljs-variable,language_">document</span>.<span class="hljs-title,function_" class="hljs-title,function_">execCommand</span>(<span class="hljs-string" class="hljs-string">&apos;copy&apos;</span>);
            <span class="hljs-variable,language_" class="hljs-variable,language_">document</span>.<span class="hljs-property" class="hljs-property">body</span>.<span class="hljs-title,function_" class="hljs-title,function_">removeChild</span>(textArea);
        }
    }
</span><span class="xml" class="xml"><span class="hljs-tag" class="hljs-tag">&lt;/<span class="hljs-name" class="hljs-name">script</span>&gt;</span></span></code></pre><div class="playground" data-html="&lt;!-- reactive --&gt;
    &lt;style&gt;
        body { font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif; max-width: 600px; margin: 40px auto; padding: 20px; line-height: 1.6; color: #333; }
        .card { border: 1px solid #e1e4e8; padding: 24px; border-radius: 12px; box-shadow: 0 8px 24px rgba(149,157,165,0.1); background: white; }
        h2 { margin-top: 0; color: #0366d6; font-size: 1.5rem; }
        label { display: block; margin-top: 15px; font-weight: 600; font-size: 0.9rem; color: #586069; }
        input, textarea { width: 100%; padding: 10px; margin-top: 6px; box-sizing: border-box; border: 1px solid #d1d5da; border-radius: 6px; font-size: 14px; background: #fafbfc; transition: border 0.2s; }
        input:focus, textarea:focus { border-color: #0366d6; outline: none; background: white; box-shadow: 0 0 0 3px rgba(3,102,214,0.1); }
        button { background: #2ea44f; color: white; border: 1px solid rgba(27,31,35,0.15); padding: 12px; border-radius: 6px; cursor: pointer; margin-top: 24px; width: 100%; font-weight: 600; font-size: 16px; transition: background 0.2s; }
        button:hover { background: #2c974b; }
        
        #result-container { margin-top: 24px; display: none; animation: fadeIn 0.3s ease; }
        .result-box { 
            background: #f6f8fa; 
            padding: 15px; 
            word-break: break-all; 
            border: 1px dashed #0366d6; 
            border-radius: 6px; 
            font-family: &quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, monospace; 
            font-size: 13px;
            cursor: pointer;
            position: relative;
            transition: background 0.2s;
        }
        .result-box:hover { background: #f0f3f6; }
        .result-box::after { content: &quot;ç‚¹å‡»å¤åˆ¶&quot;; position: absolute; right: 8px; top: 4px; font-size: 10px; color: #0366d6; font-weight: bold; opacity: 0.7; }
        
        .copy-tip { color: #28a745; font-size: 12px; font-weight: bold; margin-top: 8px; display: none; text-align: center; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    &lt;/style&gt;

&lt;div class=&quot;card&quot;&gt;
    &lt;h2&gt;ğŸ”— Proxy åè®®ç”Ÿæˆå™¨&lt;/h2&gt;
    
    &lt;label&gt;ä»£ç†æœåŠ¡å™¨åœ°å€ (Proxy URL)&lt;/label&gt;
    &lt;input type=&quot;text&quot; id=&quot;proxyUrl&quot; placeholder=&quot;https://my-server.com/proxy&quot; value=&quot;https://my-server.com/proxy&quot;&gt;

    &lt;label&gt;ç›®æ ‡ API æ ¹è·¯å¾„ (Target Base)&lt;/label&gt;
    &lt;input type=&quot;text&quot; id=&quot;targetBase&quot; placeholder=&quot;https://openai.com/api&quot; value=&quot;https://openai.com/api&quot;&gt;

    &lt;label&gt;è‡ªå®šä¹‰ Header (JSON)&lt;/label&gt;
    &lt;textarea id=&quot;headers&quot; rows=&quot;3&quot;&gt;{&quot;x-proxy-key&quot;: &quot;Bearer sk-123456&quot;}&lt;/textarea&gt;

    &lt;button onclick=&quot;generateLink()&quot;&gt;ç”Ÿæˆå¹¶å¤åˆ¶é“¾æ¥&lt;/button&gt;

    &lt;div id=&quot;result-container&quot;&gt;
        &lt;label&gt;ç”Ÿæˆçš„ä¼ªåè®®å‰ç¼€ (ç‚¹å‡»ä¸‹æ–¹æ–¹æ¡†è‡ªåŠ¨å¤åˆ¶):&lt;/label&gt;
        &lt;div class=&quot;result-box&quot; id=&quot;output&quot; onclick=&quot;copyToClipboard()&quot;&gt;&lt;/div&gt;
        &lt;div id=&quot;copyTip&quot; class=&quot;copy-tip&quot;&gt;âœ… å·²æˆåŠŸå¤åˆ¶åˆ°å‰ªè´´æ¿ï¼&lt;/div&gt;
        &lt;p style=&quot;font-size: 12px; color: #6a737d; margin-top: 12px;&quot;&gt;
            ğŸ’¡ æç¤ºï¼šåœ¨ä»£ç ä¸­è°ƒç”¨æ—¶ï¼Œç›´æ¥æ‹¼æ¥å…·ä½“è·¯å¾„ï¼Œä¾‹å¦‚ï¼š&lt;br&gt;
            &lt;code&gt;fetch(prefix + &apos;/v1/chat/completions&apos;)&lt;/code&gt;
        &lt;/p&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;script&gt;
    function generateLink() {
        const proxyUrl = document.getElementById(&apos;proxyUrl&apos;).value;
        const targetBase = document.getElementById(&apos;targetBase&apos;).value;
        const headersStr = document.getElementById(&apos;headers&apos;).value;

        try {
            // æ ¡éªŒ JSON æ ¼å¼
            const headers = JSON.parse(headersStr);
            const config = { proxyUrl, targetBase, headers };

            // å®‰å…¨çš„ UTF-8 Base64 ç¼–ç é€»è¾‘
            const jsonStr = JSON.stringify(config);
            const base64 = btoa(encodeURIComponent(jsonStr).replace(/%([0-9A-F]{2})/g, (match, p1) =&gt; {
                return String.fromCharCode(&apos;0x&apos; + p1);
            }));

            const finalUrl = `proxy://${base64}@`;
            
            // æ˜¾ç¤ºç»“æœ
            const output = document.getElementById(&apos;output&apos;);
            output.innerText = finalUrl;
            document.getElementById(&apos;result-container&apos;).style.display = &apos;block&apos;;
            
            // è‡ªåŠ¨è§¦å‘ä¸€æ¬¡å¤åˆ¶
            copyToClipboard(false); 
        } catch (e) {
            alert(&quot;âŒ é”™è¯¯ï¼šJSON æ ¼å¼ä¸æ­£ç¡®ï¼Œè¯·æ£€æŸ¥ Header å­—æ®µï¼&quot;);
        }
    }

    async function copyToClipboard(showVisualFeedback = true) {
        const text = document.getElementById(&apos;output&apos;).innerText;
        if (!text) return;

        try {
            await navigator.clipboard.writeText(text);
            
            if (showVisualFeedback) {
                const tip = document.getElementById(&apos;copyTip&apos;);
                tip.style.display = &apos;block&apos;;
                setTimeout(() =&gt; {
                    tip.style.display = &apos;none&apos;;
                }, 2000);
            }
        } catch (err) {
            // é™çº§å¤„ç†
            const textArea = document.createElement(&quot;textarea&quot;);
            textArea.value = text;
            document.body.appendChild(textArea);
            textArea.select();
            document.execCommand(&apos;copy&apos;);
            document.body.removeChild(textArea);
        }
    }
&lt;/script&gt;"></div></div></div><script type="module">const injectHtml = (root, html) => {
  const iframe = document.createElement("iframe");
  const htmlContent = `<html><head></head><body>${html}</body></html>`;
  iframe.style.width = "100%";
  iframe.style.height = "100%";
  iframe.onload = () => {
    const doc = iframe.contentDocument || iframe.contentWindow?.document;
    if (!doc) {
      return;
    }
    doc.open();
    doc.write(htmlContent);
    doc.close();
  };
  root.replaceChildren(iframe);
}
  document.querySelectorAll('.playground')?.forEach(el=>{
    const html = el.getAttribute('data-html');
    if (html) {
      injectHtml(el,html);
    }
    const indicator = document.createElement("div");
    indicator.className = "indicator";
    const showCode = document.createElement("div");
    showCode.className = "show-code";
    showCode.innerText = "code";
    showCode.onclick = () => {
      el.parentElement.classList.remove("preview-only");
    };
    const showPreview = document.createElement("div");
    showPreview.className = "show-preview";
    showPreview.innerText = "preview";
    showPreview.onclick = () => {
      el.parentElement.classList.add("preview-only");
    };
    indicator.appendChild(showCode);
    indicator.appendChild(showPreview);
    el.parentElement.appendChild(indicator);
    if (window.screen.width < 768) {
      showPreview.click();
    }
  });</script></div> <div data-page-id="ä½¿ç”¨Relayrä»£ç†åè®®URL" class="navigator flex justify-between items-center mt-4 py-4"> <a href="/post/é€šè¿‡Relayrå¿«æ·è®°è´¦" class="flex items-center gap-1 text-blue cursor-pointer flex-[45%]"> <div class="i-ri:arrow-left-double-line w-5 h-5 flex-shrink-0"></div> <div class="text-start">é€šè¿‡Relayrå¿«æ·è®°è´¦</div> </a> <div></div> </div> </div> <div class="outline-wrapper"></div> </main> <div class="giscus-container flex justify-center"> <div class="w-full max-w-[870px] mx-8"> <script src="https://giscus.app/client.js" data-repo="glink25/glink25.github.io" data-repo-id="R_kgDONTJ_KQ" data-category="Announcements" data-category-id="DIC_kwDONTJ_Kc4Ckrg6" data-mapping="pathname" data-strict="0" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="bottom" data-theme="preferred_color_scheme" data-lang="zh-CN" crossorigin="anonymous" async></script> </div> </div> <div class="mt-8 w-full flex flex-col items-center group"> <ul class="max-w-[720px] flex justify-center gap-6 [&_li]:opacity-60 [&_li:hover]:opacity-100 border-t border-t-[4px] border-t-double pt-4"> <li> <a href="/tag">Tags</a> </li> <li> <a href="https://github.com/glink25" target="_blank">About</a> </li> <li class="relative" tabindex="-1"> <div class="cursor-pointer">Tools</div> </li> </ul> <div class="group-focus-within:flex hidden flex-col gap-2 p-2 items-center [&>*]:opacity-60 [&>*:hover]:opacity-100 [&>*:hover]:underline [&>*:hover:after]:content-[1]"> <a href="https://oncent.github.io" target="_blank">Oncent - å¤šäººè®°è´¦PWAï¼Œæ— éœ€æœåŠ¡å™¨</a> <a href="https://peek-transfer.github.io" target="_blank">Peek - ç‚¹å¯¹ç‚¹å¿«é€Ÿä¼ è¾“æ–‡ä»¶</a> <a href="https://glink25.gitee.io" target="_blank">My Days - å€’æ•°æ—¥</a> </div> </div> <footer class="flex justify-center"> <small class="w-full max-w-[720px] min-h-12 flex justify-center items-center opacity-60"> <a href="https://github.com/glink25" target="_blank">Â© Glink</a> </small> </footer> </body></html>